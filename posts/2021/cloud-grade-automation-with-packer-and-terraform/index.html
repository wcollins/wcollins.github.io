<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Cloud Grade Automation With Packer and Terraform - Blog</title><meta name=Description content="Exploring the disruptive world of cloud tech"><meta property="og:title" content="Cloud Grade Automation With Packer and Terraform"><meta property="og:description" content="Manually provisioning infrastructure slows down application delivery, isolates knowledge, can hamper operations teams, and doesn&rsquo;t scale. Automating infrastructure provisioning can address these challenges by shifting manual process into code. Hashicorp has products spanning the infrastructure, security, and application stack that can unlock that cloud operating model and deliver applications faster.
Let&rsquo;s examine image lifecycle management and IaaS deployment. Both of these tasks are common challenges faced by the enterprise when moving to the cloud."><meta property="og:type" content="article"><meta property="og:url" content="http://wcollins.io/posts/2021/cloud-grade-automation-with-packer-and-terraform/"><meta property="og:image" content="http://wcollins.io/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-02-08T12:32:29-05:00"><meta property="article:modified_time" content="2021-02-08T12:32:29-05:00"><meta property="og:site_name" content="Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://wcollins.io/"><meta name=twitter:title content="Cloud Grade Automation With Packer and Terraform"><meta name=twitter:description content="Manually provisioning infrastructure slows down application delivery, isolates knowledge, can hamper operations teams, and doesn&rsquo;t scale. Automating infrastructure provisioning can address these challenges by shifting manual process into code. Hashicorp has products spanning the infrastructure, security, and application stack that can unlock that cloud operating model and deliver applications faster.
Let&rsquo;s examine image lifecycle management and IaaS deployment. Both of these tasks are common challenges faced by the enterprise when moving to the cloud."><meta name=application-name content="Blog"><meta name=apple-mobile-web-app-title content="Blog"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=http://wcollins.io/posts/2021/cloud-grade-automation-with-packer-and-terraform/><link rel=prev href=http://wcollins.io/posts/2021/cloud-security-and-azure-private-link/><link rel=next href=http://wcollins.io/posts/2021/exploring-azure-cloud-networking-part-1/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><meta name=google-site-verification content="FSCEdJZD7nAoKk16ak20hRMKNBvXlnHAU0PBBDZy5DU"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Cloud Grade Automation With Packer and Terraform","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/wcollins.io\/posts\/2021\/cloud-grade-automation-with-packer-and-terraform\/"},"genre":"posts","keywords":"azure, iaas, immutability, linux, packer, terraform, ubuntu","wordcount":985,"url":"http:\/\/wcollins.io\/posts\/2021\/cloud-grade-automation-with-packer-and-terraform\/","datePublished":"2021-02-08T12:32:29-05:00","dateModified":"2021-02-08T12:32:29-05:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"William Collins"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"light"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"light"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=Blog><span class=header-title-pre><i class='far fa-solid fa-cloud' aria-hidden=true></i></span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/>Home </a><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/talks/>Talks </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><a class=menu-item href=/about>About </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=Blog><span class=header-title-pre><i class='far fa-solid fa-cloud' aria-hidden=true></i></span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/ title>Home</a><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/talks/ title>Talks</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a class=menu-item href=/about title>About</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Cloud Grade Automation With Packer and Terraform</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>William Collins</a></span>&nbsp;<span class=post-category>included in <a href=/categories/automation/><i class="far fa-folder fa-fw" aria-hidden=true></i>automation</a>&nbsp;<a href=/categories/cloud/><i class="far fa-folder fa-fw" aria-hidden=true></i>cloud</a>&nbsp;<a href=/categories/tools/><i class="far fa-folder fa-fw" aria-hidden=true></i>tools</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime="8 February 2021">8 February 2021</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;985 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;5 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#what-is-cloud-grade-automation>What Is Cloud Grade Automation?</a></li><li><a href=#evolving-automation>Evolving Automation</a><ul><li><a href=#runtime---mutable>Runtime - (Mutable)</a></li><li><a href=#build-time---immutable>Build-time - (Immutable)</a></li></ul></li><li><a href=#getting-started-with-packer>Getting Started With Packer</a><ul><li><a href=#building-a-machine-image>Building A Machine Image</a></li></ul></li><li><a href=#getting-started-with-terraform>Getting Started With Terraform</a><ul><li><a href=#deploying-some-infrastructure>Deploying Some Infrastructure</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div><div class=content id=content><p>Manually provisioning infrastructure slows down application delivery, isolates knowledge, can hamper operations teams, and doesn&rsquo;t scale. Automating infrastructure provisioning can address these challenges by shifting manual process into code. <a href=https://www.hashicorp.com/ target=_blank rel="noopener noreffer">Hashicorp</a> has products spanning the infrastructure, security, and application stack that can unlock that cloud operating model and deliver applications faster.</p><p>Let&rsquo;s examine <em>image lifecycle management</em> and <em>IaaS deployment</em>. Both of these tasks are common challenges faced by the <em>enterprise</em> when moving to the cloud. Using <a href=https://www.packer.io/ target=_blank rel="noopener noreffer">Packer</a>, we can <em>automate</em> the build process for images and then deploy common infrastructure and <a href=https://azure.microsoft.com/en-us/services/virtual-machines/ target=_blank rel="noopener noreffer">virtual machines</a> with <a href=https://www.terraform.io/ target=_blank rel="noopener noreffer">Terraform</a>.</p><p><figure><a class=lightgallery href=/posts/2021/cloud-grade-automation-with-packer-and-terraform/cloud-grade-intro.png title="Cloud Grade Intro" data-thumbnail=/posts/2021/cloud-grade-automation-with-packer-and-terraform/cloud-grade-intro.png data-sub-html="<h2>Intro</h2><p>Cloud Grade Intro</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/posts/2021/cloud-grade-automation-with-packer-and-terraform/cloud-grade-intro.png data-srcset="/posts/2021/cloud-grade-automation-with-packer-and-terraform/cloud-grade-intro.png, /posts/2021/cloud-grade-automation-with-packer-and-terraform/cloud-grade-intro.png 1.5x, /posts/2021/cloud-grade-automation-with-packer-and-terraform/cloud-grade-intro.png 2x" data-sizes=auto alt=/posts/2021/cloud-grade-automation-with-packer-and-terraform/cloud-grade-intro.png width=2297 height=1196></a><figcaption class=image-caption>Intro</figcaption></figure></p><h2 id=what-is-cloud-grade-automation>What Is Cloud Grade Automation?</h2><p>I started using this expression as a <em>catch phrase</em> some time back, mainly in Powerpoint slides. The way I would describe its meaning goes well beyond a single tool, process, or methodology. To me, it embodies the core guiding principles for cloud and application delivery in today&rsquo;s landscape. Let&rsquo;s start with the outcomes we are aiming for:</p><ul><li>Loosely coupled application architecture; Cloud Native</li><li>Infrastructure hosting a given application is delivered intact</li><li>Infrastructure is never touched, changed, or otherwise modified in any way</li><li>When changes are necessary, the environment is re-deployed from the newest artifact</li><li>Rollback occurs in the same way except with an older versioned artifact</li></ul><p>The culture, tooling, process, and delivery that can achieve these outcomes, is my impression of what <em>Cloud Grade Automation</em> is. I&rsquo;ll be focusing specifically on the tooling and delivery in this post.</p><h2 id=evolving-automation>Evolving Automation</h2><p>Automation can typically be handled at two different stages of a given <em>workflow</em>. Choosing which stage can ultimately drive <em>operational</em> decisions. As application architectures have evolved, the automation used to build the infrastructure has transformed. Complexity has largely shifted from <em>runtime</em> to <em>build-time</em>.</p><h3 id=runtime---mutable>Runtime - (Mutable)</h3><p>When we think <em>automation</em>, folks that have been around a while typically think in terms of <em>mutable</em>. This means we deploy our server and then configure, update, or modify it <em>in-place</em>. I have seen anything from scripts (Shell, Perl, and Python) to configuration management tools like <a href=https://www.ansible.com/ target=_blank rel="noopener noreffer">Ansible</a>, <a href=https://www.chef.io/ target=_blank rel="noopener noreffer">Chef</a> and <a href=https://puppet.com/ target=_blank rel="noopener noreffer">Puppet</a> used to accomplish this.</p><blockquote><p><a href=https://www.merriam-webster.com/dictionary/mutable target=_blank rel="noopener noreffer">Webster</a> defines <em>mutable</em> as <strong>":prone to change: INCONSTANT"</strong>.</p></blockquote><p>To further expand on <em>runtime</em> configuration, let&rsquo;s take the example of installing an agent-based solution. For the sake of demonstration, let&rsquo;s say that each virtual machine provisioned in our infrastructure requires running <a href=https://www.thousandeyes.com/product/enterprise-agents target=_blank rel="noopener noreffer">ThousandEyes - Enterprise Agents</a> for monitoring.</p><ul><li>A <em>greenfield</em> application is getting developed; New infrastructure is required (Develop)</li><li>The new server (or multiple servers) are provisioned for the application to run on (Deploy)</li><li>Config Management tooling applies the standard configuration, including the Agent (Configure)</li></ul><p><figure><a class=lightgallery href=/posts/2021/cloud-grade-automation-with-packer-and-terraform/mutable-workflow.png title="Mutable Workflow" data-thumbnail=/posts/2021/cloud-grade-automation-with-packer-and-terraform/mutable-workflow.png data-sub-html="<h2>Mutable</h2><p>Mutable Workflow</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/posts/2021/cloud-grade-automation-with-packer-and-terraform/mutable-workflow.png data-srcset="/posts/2021/cloud-grade-automation-with-packer-and-terraform/mutable-workflow.png, /posts/2021/cloud-grade-automation-with-packer-and-terraform/mutable-workflow.png 1.5x, /posts/2021/cloud-grade-automation-with-packer-and-terraform/mutable-workflow.png 2x" data-sizes=auto alt=/posts/2021/cloud-grade-automation-with-packer-and-terraform/mutable-workflow.png width=4710 height=1571></a><figcaption class=image-caption>Mutable</figcaption></figure></p><p><em>Mutable</em> infrastructure is susceptible to <em>configuration drift</em>. As individual changes get applied on servers throughout their lifecycle, the configuration will significantly differ from the <em>desired state</em> and other servers across the environment.</p><h3 id=build-time---immutable>Build-time - (Immutable)</h3><p><em>Immutable</em> infrastructure aims to reduce the number of moving pieces at <em>runtime</em>. Handling infrastructure this way speeds up delivery, eliminates configuration drift, increases environment consistency, optimizes rollback, and simplifies horizontal scaling.</p><blockquote><p><a href=https://www.merriam-webster.com/dictionary/immutable target=_blank rel="noopener noreffer">Webster</a> defines <em>immutable</em> as <strong>":not capable of or susceptible to change"</strong>.</p></blockquote><p>To further expand on <em>build-time</em> configuration, let&rsquo;s take the same example used above:</p><ul><li>A <em>greenfield</em> application is getting developed; New infrastructure is required (Develop)</li><li>The standard configuration and <em>Enterprise Agent</em> get packaged at build-time (Configure)</li><li>Infrastructure is provisioned using the machine template and deployed at <em>runtime</em> (Deploy)</li></ul><p><figure><a class=lightgallery href=/posts/2021/cloud-grade-automation-with-packer-and-terraform/immutable-workflow.png title="Immutable Workflow" data-thumbnail=/posts/2021/cloud-grade-automation-with-packer-and-terraform/immutable-workflow.png data-sub-html="<h2>Immutable</h2><p>Immutable Workflow</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/posts/2021/cloud-grade-automation-with-packer-and-terraform/immutable-workflow.png data-srcset="/posts/2021/cloud-grade-automation-with-packer-and-terraform/immutable-workflow.png, /posts/2021/cloud-grade-automation-with-packer-and-terraform/immutable-workflow.png 1.5x, /posts/2021/cloud-grade-automation-with-packer-and-terraform/immutable-workflow.png 2x" data-sizes=auto alt=/posts/2021/cloud-grade-automation-with-packer-and-terraform/immutable-workflow.png width=4684 height=1573></a><figcaption class=image-caption>Immutable</figcaption></figure></p><p>Building <em>immutable</em> infrastructure can be a significant undertaking when considering the transition of <em>brownfield</em> applications. One dependency ensures that the <em>application layer</em> remains <a href=https://en.wikipedia.org/wiki/Service_statelessness_principle target=_blank rel="noopener noreffer">stateless</a>, including servers. Anything at this level should and will be consistently destroyed and rebuilt.</p><h2 id=getting-started-with-packer>Getting Started With Packer</h2><p><a href=https://www.packer.io/ target=_blank rel="noopener noreffer">Packer</a> automates the creation of any machine image. Once the image is packaged, it can then be provisioned with Terraform. While this is the new, modern, cool, and cloud way to accomplish this, other methods have existed for a very long time. Back in 2014, I was doing <em>non-interactive</em> installs of various Linux distributions on <a href=https://www.linux-kvm.org/page/Main_Page target=_blank rel="noopener noreffer">Linux KVM</a> with <a href=https://libvirt.org/manpages/virsh.html target=_blank rel="noopener noreffer">virsh</a> and <a href=https://linux.die.net/man/1/virt-install target=_blank rel="noopener noreffer">virt-install</a>. Virt-install would use <em>libvirt&rsquo;s</em> streaming API to upload the kernel and modified <em>initrd</em> to the remote host.</p><p><figure><a class=lightgallery href=/posts/2021/cloud-grade-automation-with-packer-and-terraform/packer-overview.png title="Packer Overview" data-thumbnail=/posts/2021/cloud-grade-automation-with-packer-and-terraform/packer-overview.png data-sub-html="<h2>Packer</h2><p>Packer Overview</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/posts/2021/cloud-grade-automation-with-packer-and-terraform/packer-overview.png data-srcset="/posts/2021/cloud-grade-automation-with-packer-and-terraform/packer-overview.png, /posts/2021/cloud-grade-automation-with-packer-and-terraform/packer-overview.png 1.5x, /posts/2021/cloud-grade-automation-with-packer-and-terraform/packer-overview.png 2x" data-sizes=auto alt=/posts/2021/cloud-grade-automation-with-packer-and-terraform/packer-overview.png width=2276 height=591></a><figcaption class=image-caption>Packer</figcaption></figure></p><h3 id=building-a-machine-image>Building A Machine Image</h3><p>As an example, let&rsquo;s package an <a href=https://releases.ubuntu.com/18.04/ target=_blank rel="noopener noreffer">Ubuntu 18.04</a> image with a <a href=https://www.thousandeyes.com/product/enterprise-agents target=_blank rel="noopener noreffer">ThousandEyes - Agent</a>. Although an overly simplistic example, it should demonstrate our desired intent and behavior. Demo code can be found <a href=https://github.com/wcollins/packer-azure-demo-linux target=_blank rel="noopener noreffer">here.</a></p><p><figure><a class=lightgallery href=/posts/2021/cloud-grade-automation-with-packer-and-terraform/packer-build.gif title="Packer Build" data-thumbnail=/posts/2021/cloud-grade-automation-with-packer-and-terraform/packer-build.gif data-sub-html="<h2>Packer</h2><p>Packer Build</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/posts/2021/cloud-grade-automation-with-packer-and-terraform/packer-build.gif data-srcset="/posts/2021/cloud-grade-automation-with-packer-and-terraform/packer-build.gif, /posts/2021/cloud-grade-automation-with-packer-and-terraform/packer-build.gif 1.5x, /posts/2021/cloud-grade-automation-with-packer-and-terraform/packer-build.gif 2x" data-sizes=auto alt=/posts/2021/cloud-grade-automation-with-packer-and-terraform/packer-build.gif width=1768 height=679></a><figcaption class=image-caption>Packer</figcaption></figure></p><p><a href=https://github.com/wcollins/packer-azure-demo-linux/blob/master/ubuntu-18.04-LTS.json target=_blank rel="noopener noreffer"><strong>ubuntu-18.04-LTS.json</strong></a>
<script type=application/javascript src=https://gist.github.com/wcollins/d795c88016310886d0bce209004e6636.js></script></p><blockquote><p>Instead of using the <em>shell</em> provisioner to deploy the agent (see line 35 in the template), a more elegant method would call the <strong>&ldquo;type&rdquo;: &ldquo;ansible&rdquo;</strong> provisioner pointing to a <strong>playbook.yml</strong> file in the repository. This would allow you to separate packages into separate playbooks managed in <em>version control</em>.</p></blockquote><h2 id=getting-started-with-terraform>Getting Started With Terraform</h2><p><figure><a class=lightgallery href=/posts/2021/cloud-grade-automation-with-packer-and-terraform/terraform-overview.png title="Terraform Overview" data-thumbnail=/posts/2021/cloud-grade-automation-with-packer-and-terraform/terraform-overview.png data-sub-html="<h2>Terraform</h2><p>Terraform Overview</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/posts/2021/cloud-grade-automation-with-packer-and-terraform/terraform-overview.png data-srcset="/posts/2021/cloud-grade-automation-with-packer-and-terraform/terraform-overview.png, /posts/2021/cloud-grade-automation-with-packer-and-terraform/terraform-overview.png 1.5x, /posts/2021/cloud-grade-automation-with-packer-and-terraform/terraform-overview.png 2x" data-sizes=auto alt=/posts/2021/cloud-grade-automation-with-packer-and-terraform/terraform-overview.png width=3266 height=1037></a><figcaption class=image-caption>Terraform</figcaption></figure></p><p><a href=https://www.terraform.io/ target=_blank rel="noopener noreffer">Terraform</a> codifies cloud APIs into declarative configuration files. If you want to create reproducible infrastructure for consistent testing, staging, and production environments with the same configuration, look no further! While it&rsquo;s generally not that simple, Terraform does seem to be the <em>defacto</em> tool these days for <em>Infrastructure as Code</em> in the cloud.</p><h3 id=deploying-some-infrastructure>Deploying Some Infrastructure</h3><p>Let&rsquo;s deploy some foundational infrastructure along with a <a href=https://azure.microsoft.com/en-us/services/virtual-machines/ target=_blank rel="noopener noreffer">virtual machine</a> provisioned from the <em>machine image</em> we built above with Packer. Demo code can be found <a href=https://github.com/wcollins/terraform-azure-demo-vm target=_blank rel="noopener noreffer">here.</a></p><p><figure><a class=lightgallery href=/posts/2021/cloud-grade-automation-with-packer-and-terraform/terraform-deploy.gif title="Terraform Deploy" data-thumbnail=/posts/2021/cloud-grade-automation-with-packer-and-terraform/terraform-deploy.gif data-sub-html="<h2>Deploy</h2><p>Terraform Deploy</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/posts/2021/cloud-grade-automation-with-packer-and-terraform/terraform-deploy.gif data-srcset="/posts/2021/cloud-grade-automation-with-packer-and-terraform/terraform-deploy.gif, /posts/2021/cloud-grade-automation-with-packer-and-terraform/terraform-deploy.gif 1.5x, /posts/2021/cloud-grade-automation-with-packer-and-terraform/terraform-deploy.gif 2x" data-sizes=auto alt=/posts/2021/cloud-grade-automation-with-packer-and-terraform/terraform-deploy.gif width=1706 height=751></a><figcaption class=image-caption>Deploy</figcaption></figure></p><p><a href=https://github.com/wcollins/terraform-azure-demo-vm/blob/master/main.tf target=_blank rel="noopener noreffer"><strong>main.tf</strong></a>
<script type=application/javascript src=https://gist.github.com/wcollins/20de391d07fb186ce7ce200b769b9acd.js></script></p><blockquote><p>This template is an example. In practice, this would probably be broken up into at least two distinct modules (network and compute). If specific groups of resources have a similar life cycle, you would probably create a module for them. An example of this might be core network components like VNets, Subnets, and UDRs.</p></blockquote><h2 id=conclusion>Conclusion</h2><p>Learning to use <a href=https://packer.io target=_blank rel="noopener noreffer">Packer</a> or writing <a href=https://terraform.io target=_blank rel="noopener noreffer">Terraform</a> templates is a tiny piece of a vast puzzle. If the desired outcome is <a href=https://https://aws.amazon.com/devops/continuous-delivery/ target=_blank rel="noopener noreffer">Continuous Delivery</a> then application architecture, cultural philosophies, and <a href="https://https://en.wikipedia.org/wiki/Release_management#:~:text=Release%20management%20is%20the%20process,testing%20and%20deploying%20software%20releases." target=_blank rel="noopener noreffer">release management</a> all play equally important roles.</p><p>Enterprise Leaders all want <a href="https://https://en.wikipedia.org/wiki/DevOps#:~:text=DevOps%20is%20a%20set%20of,delivery%20with%20high%20software%20quality." target=_blank rel="noopener noreffer">DevOps</a> for the benefits of automation, quicker releases, reduced downtime, reliable recovery from disasters, and cost benefits in the cloud <strong>(That last one makes me chuckle)</strong>. The real question is, will they do what is necessary to buck traditional culture and adopt truly immutable infrastructure?</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 8 February 2021</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/azure/>azure</a>,&nbsp;<a href=/tags/iaas/>iaas</a>,&nbsp;<a href=/tags/immutability/>immutability</a>,&nbsp;<a href=/tags/linux/>linux</a>,&nbsp;<a href=/tags/packer/>packer</a>,&nbsp;<a href=/tags/terraform/>terraform</a>,&nbsp;<a href=/tags/ubuntu/>ubuntu</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/2021/cloud-security-and-azure-private-link/ class=prev rel=prev title="Cloud Security And Azure Private Link"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Cloud Security And Azure Private Link</a>
<a href=/posts/2021/exploring-azure-cloud-networking-part-1/ class=next rel=next title="Exploring Azure Cloud Networking - (Part 1)">Exploring Azure Cloud Networking - (Part 1)<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2019 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>William Collins</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{},lightgallery:!0,search:{algoliaAppID:"",algoliaIndex:"",algoliaSearchKey:"",highlightTag:"em",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"algolia"}}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-9QKVT40M3H")</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-9QKVT40M3H" async></script></body></html>
<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Getting Started With Alkira And Terraform - (Part 1) - Blog</title><meta name=Description content="Exploring the disruptive world of cloud tech"><meta property="og:title" content="Getting Started With Alkira And Terraform - (Part 1)"><meta property="og:description" content="HashiCorp&rsquo;s Terraform needs no introduction. It is all but the de facto vehicle for delivering cloud infrastructure, and for a good reason. What Terraform did for Multi-Cloud Infrastructure as Code, is precisely what Alkira does for the network. What happens when you use these two platforms together to deliver networking in and across clouds? If providing network services in code faster than ever before sounds interesting, this multi-part series is for you."><meta property="og:type" content="article"><meta property="og:url" content="http://wcollins.io/posts/2021/getting-started-with-alkira-and-terraform-part-1/"><meta property="og:image" content="http://wcollins.io/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-09-10T08:43:42-04:00"><meta property="article:modified_time" content="2021-09-10T08:43:42-04:00"><meta property="og:site_name" content="Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://wcollins.io/"><meta name=twitter:title content="Getting Started With Alkira And Terraform - (Part 1)"><meta name=twitter:description content="HashiCorp&rsquo;s Terraform needs no introduction. It is all but the de facto vehicle for delivering cloud infrastructure, and for a good reason. What Terraform did for Multi-Cloud Infrastructure as Code, is precisely what Alkira does for the network. What happens when you use these two platforms together to deliver networking in and across clouds? If providing network services in code faster than ever before sounds interesting, this multi-part series is for you."><meta name=application-name content="Blog"><meta name=apple-mobile-web-app-title content="Blog"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=http://wcollins.io/posts/2021/getting-started-with-alkira-and-terraform-part-1/><link rel=prev href=http://wcollins.io/posts/2021/intro-to-terraform-modules-with-aws/><link rel=next href=http://wcollins.io/posts/2021/getting-started-with-alkira-and-terraform-part-2/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><meta name=google-site-verification content="FSCEdJZD7nAoKk16ak20hRMKNBvXlnHAU0PBBDZy5DU"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Getting Started With Alkira And Terraform - (Part 1)","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/wcollins.io\/posts\/2021\/getting-started-with-alkira-and-terraform-part-1\/"},"genre":"posts","keywords":"alkira, cloud routing, immutability, infrastructure-as-code, terraform, terraform cloud, terraform modules, segmentation","wordcount":481,"url":"http:\/\/wcollins.io\/posts\/2021\/getting-started-with-alkira-and-terraform-part-1\/","datePublished":"2021-09-10T08:43:42-04:00","dateModified":"2021-09-10T08:43:42-04:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"William Collins"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"light"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"light"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=Blog><span class=header-title-pre><i class='far fa-solid fa-cloud' aria-hidden=true></i></span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/>Home </a><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/talks/>Talks </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><a class=menu-item href=/about>About </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=Blog><span class=header-title-pre><i class='far fa-solid fa-cloud' aria-hidden=true></i></span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/ title>Home</a><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/talks/ title>Talks</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a class=menu-item href=/about title>About</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Getting Started With Alkira And Terraform - (Part 1)</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>William Collins</a></span>&nbsp;<span class=post-category>included in <a href=/categories/automation/><i class="far fa-folder fa-fw" aria-hidden=true></i>automation</a>&nbsp;<a href=/categories/cloud/><i class="far fa-folder fa-fw" aria-hidden=true></i>cloud</a>&nbsp;<a href=/categories/cloud-networking/><i class="far fa-folder fa-fw" aria-hidden=true></i>cloud networking</a>&nbsp;<a href=/categories/cloud-security/><i class="far fa-folder fa-fw" aria-hidden=true></i>cloud security</a>&nbsp;<a href=/categories/tools/><i class="far fa-folder fa-fw" aria-hidden=true></i>tools</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime="10 September 2021">10 September 2021</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;481 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;3 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#a-scalable-foundation>A Scalable Foundation</a></li><li><a href=#segmentation-layout>Segmentation Layout</a></li><li><a href=#lets-build>Let&rsquo;s Build!</a><ul><li><a href=#segmentation>Segmentation</a></li><li><a href=#internet-egress>Internet Egress</a></li><li><a href=#provision-on-pull-request>Provision On Pull Request</a></li><li><a href=#validation>Validation</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div><div class=content id=content><p><a href=https://www.terraform.io/ target=_blank rel="noopener noreffer">HashiCorp&rsquo;s Terraform</a> needs no introduction. It is all but the de facto vehicle for delivering cloud infrastructure, and for a good reason. What Terraform did for <strong>Multi-Cloud</strong> <em>Infrastructure as Code</em>, is precisely what <a href=https://alkira.com target=_blank rel="noopener noreffer">Alkira</a> does for the network. What happens when you use these two platforms together to deliver networking in and across clouds? If providing network services in code faster than ever before sounds interesting, this multi-part series is for you. Need a quick primer on Alkira? <a href=https://wcollins.io/posts/2020/alkira-multicloud-networking/ target=_blank rel="noopener noreffer">You can read up here.</a></p><p><figure><a class=lightgallery href=/posts/2021/getting-started-with-alkira-and-terraform-part-1/intro.png title=Intro data-thumbnail=/posts/2021/getting-started-with-alkira-and-terraform-part-1/intro.png data-sub-html="<h2>Intro</h2><p>Intro</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/posts/2021/getting-started-with-alkira-and-terraform-part-1/intro.png data-srcset="/posts/2021/getting-started-with-alkira-and-terraform-part-1/intro.png, /posts/2021/getting-started-with-alkira-and-terraform-part-1/intro.png 1.5x, /posts/2021/getting-started-with-alkira-and-terraform-part-1/intro.png 2x" data-sizes=auto alt=/posts/2021/getting-started-with-alkira-and-terraform-part-1/intro.png width=2940 height=2198></a><figcaption class=image-caption>Intro</figcaption></figure></p><h2 id=a-scalable-foundation>A Scalable Foundation</h2><p>Troubleshooting networks that have been <em>over-engineered</em> can be tricky. Some of the most reliable networks I have worked in were also the most simple by design. Simple is easier to understand, automate, and scale. To begin this series, let&rsquo;s deploy the following:</p><ul><li>A <a href=https://registry.terraform.io/providers/alkiranet/alkira/latest/docs/resources/segment target=_blank rel="noopener noreffer">Segment</a> for <em>macro-segmentation</em>; (We will deploy additional segments in a later post to demonstrate <strong>Partner</strong> and <strong>Acquisition</strong> connectivity scenarios)</li><li><a href=https://registry.terraform.io/providers/alkiranet/alkira/latest/docs/resources/group target=_blank rel="noopener noreffer">Groups</a> for <em>micro-segmentation</em>; These will be used for policy enforcement once we start connecting cloud and on-premises networks</li><li>A <a href=https://registry.terraform.io/providers/alkiranet/alkira/latest/docs/resources/billing_tag target=_blank rel="noopener noreffer">Billing Tag</a> mapping to a hypothetical <em>Line of Business</em> (Let&rsquo;s say <em>Digital Transformation</em>); Being able to bill specific app or product teams for network consumption is a game-changer</li><li>An <a href=https://registry.terraform.io/providers/alkiranet/alkira/latest/docs/resources/connector_internet target=_blank rel="noopener noreffer">Internet Exit</a> for users, sites, and clouds along with elastically scaled <a href=https://docs.paloaltonetworks.com/vm-series/9-1/vm-series-deployment/about-the-vm-series-firewall.html target=_blank rel="noopener noreffer">VM-Series Firewalls</a> for our IPS, IDS, and ALG needs</li></ul><h2 id=segmentation-layout>Segmentation Layout</h2><p><figure><a class=lightgallery href=/posts/2021/getting-started-with-alkira-and-terraform-part-1/segment-layout.png title="Segment Layout" data-thumbnail=/posts/2021/getting-started-with-alkira-and-terraform-part-1/segment-layout.png data-sub-html="<h2>Layout</h2><p>Segment Layout</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/posts/2021/getting-started-with-alkira-and-terraform-part-1/segment-layout.png data-srcset="/posts/2021/getting-started-with-alkira-and-terraform-part-1/segment-layout.png, /posts/2021/getting-started-with-alkira-and-terraform-part-1/segment-layout.png 1.5x, /posts/2021/getting-started-with-alkira-and-terraform-part-1/segment-layout.png 2x" data-sizes=auto alt=/posts/2021/getting-started-with-alkira-and-terraform-part-1/segment-layout.png width=3060 height=1176></a><figcaption class=image-caption>Layout</figcaption></figure></p><blockquote><p>In Alkira, segments and groups are scaled globally, across clouds, and on-demand. To learn more about how Alkira handles <em>segmentation</em>, check out <a href="https://www.youtube.com/watch?v=qMkqI7SKpsA&t=738s" target=_blank rel="noopener noreffer">this design zone video.</a></p></blockquote><h2 id=lets-build>Let&rsquo;s Build!</h2><h3 id=segmentation>Segmentation</h3><p><a href=https://registry.terraform.io/namespaces/alkiranet target=_blank rel="noopener noreffer">Alkira&rsquo;s Terraform Provider</a> makes it easy to build networking the <strong>DevOps</strong> way. The following snippet creates our <strong>segment</strong> and <strong>groups</strong> used for <em>macro</em> and <em>micro</em> segmentation.</p><p><strong>alkira_segments.tf</strong>
<script type=application/javascript src=https://gist.github.com/wcollins/b8385910021b9e407cf428453e8ad5de.js></script></p><h3 id=internet-egress>Internet Egress</h3><p>The following code will provision an <strong>Internet Connector</strong> with <a href=https://docs.paloaltonetworks.com/vm-series/9-1/vm-series-deployment/about-the-vm-series-firewall.html target=_blank rel="noopener noreffer">VM-Series Firewalls</a>. These scale to real-time capacity demand while symmetrically steering application traffic using intent-based policies.</p><p><strong>Internet</strong>, <strong>Intranet</strong>, and <strong>Private-Spoke</strong> <a href=https://docs.paloaltonetworks.com/pan-os/8-1/pan-os-web-interface-help/network/network-zones/security-zone-overview.html target=_blank rel="noopener noreffer">security zones</a> will be provisioned on the Firewalls with each zone mapping back to the corresponding <strong>Alkira Groups</strong> which provide the baseline for segmentation and policy</p><p><strong>alkira_internet.tf</strong>
<script type=application/javascript src=https://gist.github.com/wcollins/35cd6b69cafc3e556245b935e4f46496.js></script></p><h3 id=provision-on-pull-request>Provision On Pull Request</h3><p>I&rsquo;m a big fan of <a href=https://www.terraform.io/cloud target=_blank rel="noopener noreffer">Terraform Cloud</a>. For this example, I have my infrastructure committed to <a href=https://github.com target=_blank rel="noopener noreffer">Github</a> with Terraform Cloud runs triggered automatically as changes get <strong>merged</strong> in version control.</p><p><figure><a class=lightgallery href=/posts/2021/getting-started-with-alkira-and-terraform-part-1/provision-infra.gif title="Provision Infrastructure" data-thumbnail=/posts/2021/getting-started-with-alkira-and-terraform-part-1/provision-infra.gif data-sub-html="<h2>Provision</h2><p>Provision Infrastructure</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/posts/2021/getting-started-with-alkira-and-terraform-part-1/provision-infra.gif data-srcset="/posts/2021/getting-started-with-alkira-and-terraform-part-1/provision-infra.gif, /posts/2021/getting-started-with-alkira-and-terraform-part-1/provision-infra.gif 1.5x, /posts/2021/getting-started-with-alkira-and-terraform-part-1/provision-infra.gif 2x" data-sizes=auto alt=/posts/2021/getting-started-with-alkira-and-terraform-part-1/provision-infra.gif width=2178 height=1980></a><figcaption class=image-caption>Provision</figcaption></figure></p><h3 id=validation>Validation</h3><p>Alkira has a very refined interface which serves as a great visual aid to validate configuration and policy. As we add more <em>infrastructure</em> later in this series, we will use the <em>UI</em> to gain a greater perspective into each aspect of the network.</p><p><figure><a class=lightgallery href=/posts/2021/getting-started-with-alkira-and-terraform-part-1/ui-validation.gif title="UI Validation" data-thumbnail=/posts/2021/getting-started-with-alkira-and-terraform-part-1/ui-validation.gif data-sub-html="<h2>Validation</h2><p>UI Validation</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/posts/2021/getting-started-with-alkira-and-terraform-part-1/ui-validation.gif data-srcset="/posts/2021/getting-started-with-alkira-and-terraform-part-1/ui-validation.gif, /posts/2021/getting-started-with-alkira-and-terraform-part-1/ui-validation.gif 1.5x, /posts/2021/getting-started-with-alkira-and-terraform-part-1/ui-validation.gif 2x" data-sizes=auto alt=/posts/2021/getting-started-with-alkira-and-terraform-part-1/ui-validation.gif width=3182 height=1852></a><figcaption class=image-caption>Validation</figcaption></figure></p><h2 id=conclusion>Conclusion</h2><p>The place where applications, data, and systems intersect is the network. Networks of the future must adapt and scale over time as businesses grow, markets change, and policies adapt. Elastic networking driven by automation is the future. In <a href=https://wcollins.io/posts/2021/getting-started-with-alkira-and-terraform-part-2/ target=_blank rel="noopener noreffer">Part 2</a>, we will connect a mix of AWS, Azure, and GCP networks to demonstrate just how easy <a href=https://alkira.com target=_blank rel="noopener noreffer">Alkira</a> can make the <strong>multi-cloud</strong> network experience, so stay tuned!</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 10 September 2021</span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/posts/2021/getting-started-with-alkira-and-terraform-part-1/index.md target=_blank>Read Markdown</a></span></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/alkira/>alkira</a>,&nbsp;<a href=/tags/cloud-routing/>cloud routing</a>,&nbsp;<a href=/tags/immutability/>immutability</a>,&nbsp;<a href=/tags/infrastructure-as-code/>infrastructure-as-code</a>,&nbsp;<a href=/tags/terraform/>terraform</a>,&nbsp;<a href=/tags/terraform-cloud/>terraform cloud</a>,&nbsp;<a href=/tags/terraform-modules/>terraform modules</a>,&nbsp;<a href=/tags/segmentation/>segmentation</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/2021/intro-to-terraform-modules-with-aws/ class=prev rel=prev title="Intro To Terraform Modules With AWS"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Intro To Terraform Modules With AWS</a>
<a href=/posts/2021/getting-started-with-alkira-and-terraform-part-2/ class=next rel=next title="Getting Started With Alkira And Terraform (Part 2)">Getting Started With Alkira And Terraform (Part 2)<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2019 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>William Collins</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{},lightgallery:!0,search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-9QKVT40M3H")</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-9QKVT40M3H" async></script></body></html>
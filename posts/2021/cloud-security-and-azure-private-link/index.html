<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=theme-color><title>Cloud Security And Azure Private Link &#183; William Collins</title><meta name=title content="Cloud Security And Azure Private Link &#183; William Collins"><meta name=description content="Cloud architecture, automation, AI, and the human perspective in tech"><meta name=keywords content="azure,private-link,dns,"><link rel=canonical href=https://wcollins.io/posts/2021/cloud-security-and-azure-private-link/><meta name=author content="William Collins"><link href=https://linkedin.com/in/william-collins rel=me><link href=https://github.com/wcollins rel=me><link href=https://x.com/MacroEngineered rel=me><link href=https://youtube.com/@MacroEngineered rel=me><link href=https://wcollins.io/index.xml rel=me><meta property="og:url" content="https://wcollins.io/posts/2021/cloud-security-and-azure-private-link/"><meta property="og:site_name" content="William Collins"><meta property="og:title" content="Cloud Security And Azure Private Link"><meta property="og:description" content="Azure Private Link enables access to hosted customer and partner services over a private endpoint in an Azure virtual network. This means private connectivity over your own RFC1918 address space to any supported PaaS service while limiting the need for additional gateways, NAT appliances, public IP addresses, or ExpressRoute (Microsoft Peering)."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-01-11T18:55:25-05:00"><meta property="article:modified_time" content="2021-01-11T18:55:25-05:00"><meta property="article:tag" content="Azure"><meta property="article:tag" content="Private-Link"><meta property="article:tag" content="Dns"><meta property="og:image" content="https://wcollins.io/posts/2021/cloud-security-and-azure-private-link/featured.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://wcollins.io/posts/2021/cloud-security-and-azure-private-link/featured.png"><meta name=twitter:title content="Cloud Security And Azure Private Link"><meta name=twitter:description content="Azure Private Link enables access to hosted customer and partner services over a private endpoint in an Azure virtual network. This means private connectivity over your own RFC1918 address space to any supported PaaS service while limiting the need for additional gateways, NAT appliances, public IP addresses, or ExpressRoute (Microsoft Peering)."><meta name=google-site-verification content="FSCEdJZD7nAoKk16ak20hRMKNBvXlnHAU0PBBDZy5DU"><link type=text/css rel=stylesheet href=/css/main.bundle.min.40aab530da19413a510e31baf7eed4ff0d9f6798ebaf36f337e76577207750e02527c69574ac2dddf922b727d18d337e85a9a85485366d4622702df1c051b344.css integrity="sha512-QKq1MNoZQTpRDjG69+7U/w2fZ5jrrzbzN+dldyB3UOAlJ8aVdKwt3fkityfRjTN+hamoVIU2bUYicC3xwFGzRA=="><script type=text/javascript src=/js/appearance.min.6f41174b3a05b680820fe08cadbfa5fb7a7ca347b76a0955cdc68b9d8aca1ce24f0547e138cea33bcc7904d551a90afcb1cc7f2d9fe8557075d501419046c08c.js integrity="sha512-b0EXSzoFtoCCD+CMrb+l+3p8o0e3aglVzcaLnYrKHOJPBUfhOM6jO8x5BNVRqQr8scx/LZ/oVXB11QFBkEbAjA=="></script><script src=/lib/zoom/zoom.min.umd.a527109b68c082a70f3697716dd72a9d5aa8b545cf800cecbbc7399f2ca6f6e0ce3e431f2062b48bbfa47c9ea42822714060bef309be073f49b9c0e30d318d7b.js integrity="sha512-pScQm2jAgqcPNpdxbdcqnVqotUXPgAzsu8c5nyym9uDOPkMfIGK0i7+kfJ6kKCJxQGC+8wm+Bz9JucDjDTGNew=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.7c94d05297ae0b7db7a9476c8d132bc35cc6d9f91a1b85bce0cd8f7d4d38e82cfc33872123c12164508e21717ae94d8e417a837b8d09f94ed81736f4506cb942.js integrity="sha512-fJTQUpeuC323qUdsjRMrw1zG2fkaG4W84M2PfU046Cz8M4chI8EhZFCOIXF66U2OQXqDe40J+U7YFzb0UGy5Qg==" data-copy=Copy data-copied=Copied></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"Cloud Security And Azure Private Link","headline":"Cloud Security And Azure Private Link","inLanguage":"en","url":"https://wcollins.io/posts/2021/cloud-security-and-azure-private-link/","author":{"@type":"Person","name":"William Collins"},"copyrightYear":"2021","dateCreated":"2021-01-11T18:55:25-05:00","datePublished":"2021-01-11T18:55:25-05:00","dateModified":"2021-01-11T18:55:25-05:00","keywords":["azure","private-link","dns"],"mainEntityOfPage":"true","wordCount":"3094"},{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wcollins.io/posts/"},{"@type":"ListItem","position":2,"name":"Cloud Security And Azure Private Link","item":"https://wcollins.io/posts/2021/cloud-security-and-azure-private-link/"}]}]</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-9QKVT40M3H"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-9QKVT40M3H")</script></head><body class="flex flex-col h-screen m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32 text-lg bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral bf-scrollbar"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 pe-2 dark:text-primary-400">&darr;</span>
Skip to main content</a></div><div class=min-h-[148px]></div><div class="fixed inset-x-0 z-100"><div id=menu-blur class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl bg-neutral/25 dark:bg-neutral-800/25"></div><div class="relative m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32"><div class="main-menu flex items-center w-full gap-2 p-1 pl-0"><a href=/ class="flex items-center gap-1.5 text-base font-medium truncate min-w-0 shrink"><svg viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4 shrink-0"><path fill-rule="evenodd" d="M9.293 2.293a1 1 0 011.414.0l7 7A1 1 0 0117 11h-1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-3a1 1 0 00-1-1H9a1 1 0 00-1 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-6H3a1 1 0 01-.707-1.707l7-7z" clip-rule="evenodd"/></svg>
William Collins</a><div class="flex items-center ms-auto"><div class="hidden md:flex"><nav class="flex items-center gap-x-5 h-12"><a href=/posts/ class="flex items-center bf-icon-color-hover" aria-label=Posts title=Posts><span class=mr-1><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M421.7 220.3 188.5 453.4l-33.9-33.9 3.5-3.5H112C103.2 416 96 408.8 96 4e2V353.9l-3.49 3.5C87.78 362.2 84.31 368 82.42 374.4L59.44 452.6l78.16-23C143.1 427.7 149.8 424.2 154.6 419.5l33.9 33.9c-10.4 10.4-23.3 18.1-37.4 22.2L30.77 511C22.35 513.5 13.24 511.2 7.03 504.1.8198 498.8-1.502 489.7.976 481.2L36.37 360.9c4.16-14.1 11.79-27 22.2-37.4L291.7 90.34l130 129.96zm71-161.55C517.7 83.74 517.7 124.3 492.7 149.3l-48.4 48.4-130-129.98 48.4-48.4c25-24.998 65.6-24.998 90.6.0l39.4 39.43z"/></svg>
</span></span><span class="text-base font-medium break-normal">Posts
</span></a><a href=/talks/ class="flex items-center bf-icon-color-hover" aria-label=Talks title="Talks & Media"><span class=mr-1><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 32C114.6 32 .0272 125.1.0272 240c0 49.63 21.35 94.98 56.97 130.7-12.5 50.37-54.27 95.27-54.77 95.77-2.25 2.25-2.875 5.734-1.5 8.734C1.979 478.2 4.75 480 8 480c66.25.0 115.1-31.76 140.6-51.39C181.2 440.9 217.6 448 256 448c141.4.0 255.1-93.13 255.1-208S397.4 32 256 32z"/></svg>
</span></span><span class="text-base font-medium break-normal">Talks
</span></a><a href=/projects/ class="flex items-center bf-icon-color-hover" aria-label=Projects title=Projects><span class=mr-1><span class="relative block icon"><svg viewBox="0 0 640 512"><path fill="currentColor" d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8.0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8.0 45.3s32.8 12.5 45.3.0l112-112c12.5-12.5 12.5-32.8.0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3.0zm-306.7.0c-12.5-12.5-32.8-12.5-45.3.0l-112 112c-12.5 12.5-12.5 32.8.0 45.3l112 112c12.5 12.5 32.8 12.5 45.3.0s12.5-32.8.0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8.0-45.3z"/></svg></span>
</span><span class="text-base font-medium break-normal">Projects
</span></a><a href=/about/ class="flex items-center bf-icon-color-hover" aria-label=About title=About><span class=mr-1><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M266.3 48.3 232.5 73.6c-5.4 4-8.5 10.4-8.5 17.1v9.1c0 6.8 5.5 12.3 12.3 12.3 2.4.0 4.8-.7 6.8-2.1l41.8-27.9c2-1.3 4.4-2.1 6.8-2.1h1c6.2.0 11.3 5.1 11.3 11.3.0 3-1.2 5.9-3.3 8l-19.9 19.9c-5.8 5.8-12.9 10.2-20.7 12.8l-26.5 8.8c-5.8 1.9-9.6 7.3-9.6 13.4.0 3.7-1.5 7.3-4.1 10L202 182.1c-6.4 6.4-9.9 15-9.9 24v4.3c0 16.4 13.6 29.7 29.9 29.7 11 0 21.2-6.2 26.1-16l4-8.1c2.4-4.8 7.4-7.9 12.8-7.9 4.5.0 8.7 2.1 11.4 5.7l16.3 21.7c2.1 2.9 5.5 4.5 9.1 4.5 8.4.0 13.9-8.9 10.1-16.4l-1.1-2.3c-3.5-7 0-15.5 7.5-18l21.2-7.1c7.6-2.5 12.7-9.6 12.7-17.6.0-10.3 8.3-18.6 18.6-18.6H4e2c8.8.0 16 7.2 16 16s-7.2 16-16 16H379.3c-7.2.0-14.2 2.9-19.3 8l-4.7 4.7c-2.1 2.1-3.3 5-3.3 8 0 6.2 5.1 11.3 11.3 11.3h11.3c6 0 11.8 2.4 16 6.6l6.5 6.5c1.8 1.8 2.8 4.3 2.8 6.8s-1 5-2.8 6.8l-7.5 7.5C386 262 384 266.9 384 272s2 10 5.7 13.7L408 304c10.2 10.2 24.1 16 38.6 16H454c6.5-20.2 10-41.7 10-64 0-111.4-87.6-202.4-197.7-207.7zm172 307.9c-3.7-2.6-8.2-4.1-13-4.1-6 0-11.8-2.4-16-6.6L396 332c-7.7-7.7-18-12-28.9-12-9.7.0-19.2-3.5-26.6-9.8L314 287.4c-11.6-9.9-26.4-15.4-41.6-15.4h-21c-12.6.0-25 3.7-35.5 10.7L188.5 301c-17.8 11.9-28.5 31.9-28.5 53.3v3.2c0 17 6.7 33.3 18.7 45.3l16 16c8.5 8.5 20 13.3 32 13.3H248c13.3.0 24 10.7 24 24 0 2.5.4 5 1.1 7.3 71.3-5.8 132.5-47.6 165.2-107.2zM0 256a256 256 0 11512 0A256 256 0 110 256zM187.3 100.7c-6.2-6.2-16.4-6.2-22.6.0l-32 32c-6.2 6.2-6.2 16.4.0 22.6s16.4 6.2 22.6.0l32-32c6.2-6.2 6.2-16.4.0-22.6z"/></svg></span>
</span><span class="text-base font-medium break-normal">About
</span></a><a href=/links/ class="flex items-center bf-icon-color-hover" aria-label=Links title=Links><span class=mr-1><span class="relative block icon"><svg viewBox="0 0 640 512"><path fill="currentColor" d="M172.5 131.1c55.6-55.59 148-55.59 203.6.0 50 50 57.4 129.7 16.3 187.2L391.3 319.9C381 334.2 361 337.6 346.7 327.3c-14.4-10.3-17.8-30.3-7.5-44.6L340.3 281.1C363.2 249 359.6 205.1 331.7 177.2c-31.4-31.4-82.5-31.4-114 0L105.5 289.5c-31.51 30.6-31.51 82.5.0 114C133.3 431.4 177.3 435 209.3 412.1L210.9 410.1C225.3 400.7 245.3 404 255.5 418.4 265.8 432.8 262.5 452.8 248.1 463.1L246.5 464.2c-58.4 41.1-136.3 34.5-186.29-15.4-56.469-56.5-56.469-148.1.0-204.5L172.5 131.1zM467.5 380c-56.5 56.5-148 56.5-204.5.0-50-50-56.5-128.8-15.4-186.3L248.7 192.1C258.1 177.8 278.1 174.4 293.3 184.7 307.7 194.1 311.1 214.1 300.8 229.3L299.7 230.9C276.8 262.1 280.4 306.9 308.3 334.8c31.4 31.4 82.5 31.4 114 0L534.5 222.5c31.5-31.5 31.5-83.4.0-114C506.7 80.63 462.7 76.99 430.7 99.9L429.1 101C414.7 111.3 394.7 107.1 384.5 93.58 374.2 79.2 377.5 59.21 391.9 48.94L393.5 47.82C451 6.731 529.8 13.25 579.8 63.24c56.5 56.46 56.5 148.06.0 204.46L467.5 380z"/></svg>
</span></span><span class="text-base font-medium break-normal">Links
</span></a><button id=search-button aria-label=Search class="text-base bf-icon-color-hover" title="Search (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button><div class="flex items-center"><button id=appearance-switcher aria-label="Dark mode switcher" type=button class="text-base bf-icon-color-hover"><div class="flex items-center justify-center dark:hidden"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="items-center justify-center hidden dark:flex"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></nav></div><div class="flex md:hidden"><div class="flex items-center h-14 gap-4"><button id=search-button-mobile aria-label=Search class="flex items-center justify-center bf-icon-color-hover" title="Search (/)">
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></button>
<button id=appearance-switcher-mobile type=button aria-label="Dark mode switcher" class="flex items-center justify-center text-neutral-900 hover:text-primary-600 dark:text-neutral-200 dark:hover:text-primary-400"><div class=dark:hidden><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="hidden dark:block"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button>
<input type=checkbox id=mobile-menu-toggle autocomplete=off class="hidden peer">
<label for=mobile-menu-toggle class="flex items-center justify-center cursor-pointer bf-icon-color-hover"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></label><div role=dialog aria-modal=true style=scrollbar-gutter:stable class="fixed inset-0 z-50 invisible overflow-y-auto px-6 py-20 opacity-0 transition-[opacity,visibility] duration-300 peer-checked:visible peer-checked:opacity-100 bg-neutral-50/97 dark:bg-neutral-900/99
bf-scrollbar"><label for=mobile-menu-toggle class="fixed end-8 top-5 flex items-center justify-center z-50 h-12 w-12 cursor-pointer select-none rounded-full bf-icon-color-hover border bf-border-color bf-border-color-hover bg-neutral-50 dark:bg-neutral-900"><span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></label><nav class="mx-auto max-w-md space-y-6"><div class=px-2><a href=/posts/ aria-label=Posts class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span class="flex items-center justify-center h-8 w-8 text-2xl"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M421.7 220.3 188.5 453.4l-33.9-33.9 3.5-3.5H112C103.2 416 96 408.8 96 4e2V353.9l-3.49 3.5C87.78 362.2 84.31 368 82.42 374.4L59.44 452.6l78.16-23C143.1 427.7 149.8 424.2 154.6 419.5l33.9 33.9c-10.4 10.4-23.3 18.1-37.4 22.2L30.77 511C22.35 513.5 13.24 511.2 7.03 504.1.8198 498.8-1.502 489.7.976 481.2L36.37 360.9c4.16-14.1 11.79-27 22.2-37.4L291.7 90.34l130 129.96zm71-161.55C517.7 83.74 517.7 124.3 492.7 149.3l-48.4 48.4-130-129.98 48.4-48.4c25-24.998 65.6-24.998 90.6.0l39.4 39.43z"/></svg>
</span></span><span title=Posts class="text-2xl font-bold tracking-tight">Posts</span></a></div><div class=px-2><a href=/talks/ aria-label=Talks class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span class="flex items-center justify-center h-8 w-8 text-2xl"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M256 32C114.6 32 .0272 125.1.0272 240c0 49.63 21.35 94.98 56.97 130.7-12.5 50.37-54.27 95.27-54.77 95.77-2.25 2.25-2.875 5.734-1.5 8.734C1.979 478.2 4.75 480 8 480c66.25.0 115.1-31.76 140.6-51.39C181.2 440.9 217.6 448 256 448c141.4.0 255.1-93.13 255.1-208S397.4 32 256 32z"/></svg>
</span></span><span title="Talks & Media" class="text-2xl font-bold tracking-tight">Talks</span></a></div><div class=px-2><a href=/projects/ aria-label=Projects class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span class="flex items-center justify-center h-8 w-8 text-2xl"><span class="relative block icon"><svg viewBox="0 0 640 512"><path fill="currentColor" d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8.0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8.0 45.3s32.8 12.5 45.3.0l112-112c12.5-12.5 12.5-32.8.0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3.0zm-306.7.0c-12.5-12.5-32.8-12.5-45.3.0l-112 112c-12.5 12.5-12.5 32.8.0 45.3l112 112c12.5 12.5 32.8 12.5 45.3.0s12.5-32.8.0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8.0-45.3z"/></svg></span>
</span><span title=Projects class="text-2xl font-bold tracking-tight">Projects</span></a></div><div class=px-2><a href=/about/ aria-label=About class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span class="flex items-center justify-center h-8 w-8 text-2xl"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M266.3 48.3 232.5 73.6c-5.4 4-8.5 10.4-8.5 17.1v9.1c0 6.8 5.5 12.3 12.3 12.3 2.4.0 4.8-.7 6.8-2.1l41.8-27.9c2-1.3 4.4-2.1 6.8-2.1h1c6.2.0 11.3 5.1 11.3 11.3.0 3-1.2 5.9-3.3 8l-19.9 19.9c-5.8 5.8-12.9 10.2-20.7 12.8l-26.5 8.8c-5.8 1.9-9.6 7.3-9.6 13.4.0 3.7-1.5 7.3-4.1 10L202 182.1c-6.4 6.4-9.9 15-9.9 24v4.3c0 16.4 13.6 29.7 29.9 29.7 11 0 21.2-6.2 26.1-16l4-8.1c2.4-4.8 7.4-7.9 12.8-7.9 4.5.0 8.7 2.1 11.4 5.7l16.3 21.7c2.1 2.9 5.5 4.5 9.1 4.5 8.4.0 13.9-8.9 10.1-16.4l-1.1-2.3c-3.5-7 0-15.5 7.5-18l21.2-7.1c7.6-2.5 12.7-9.6 12.7-17.6.0-10.3 8.3-18.6 18.6-18.6H4e2c8.8.0 16 7.2 16 16s-7.2 16-16 16H379.3c-7.2.0-14.2 2.9-19.3 8l-4.7 4.7c-2.1 2.1-3.3 5-3.3 8 0 6.2 5.1 11.3 11.3 11.3h11.3c6 0 11.8 2.4 16 6.6l6.5 6.5c1.8 1.8 2.8 4.3 2.8 6.8s-1 5-2.8 6.8l-7.5 7.5C386 262 384 266.9 384 272s2 10 5.7 13.7L408 304c10.2 10.2 24.1 16 38.6 16H454c6.5-20.2 10-41.7 10-64 0-111.4-87.6-202.4-197.7-207.7zm172 307.9c-3.7-2.6-8.2-4.1-13-4.1-6 0-11.8-2.4-16-6.6L396 332c-7.7-7.7-18-12-28.9-12-9.7.0-19.2-3.5-26.6-9.8L314 287.4c-11.6-9.9-26.4-15.4-41.6-15.4h-21c-12.6.0-25 3.7-35.5 10.7L188.5 301c-17.8 11.9-28.5 31.9-28.5 53.3v3.2c0 17 6.7 33.3 18.7 45.3l16 16c8.5 8.5 20 13.3 32 13.3H248c13.3.0 24 10.7 24 24 0 2.5.4 5 1.1 7.3 71.3-5.8 132.5-47.6 165.2-107.2zM0 256a256 256 0 11512 0A256 256 0 110 256zM187.3 100.7c-6.2-6.2-16.4-6.2-22.6.0l-32 32c-6.2 6.2-6.2 16.4.0 22.6s16.4 6.2 22.6.0l32-32c6.2-6.2 6.2-16.4.0-22.6z"/></svg></span>
</span><span title=About class="text-2xl font-bold tracking-tight">About</span></a></div><div class=px-2><a href=/links/ aria-label=Links class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200"><span class="flex items-center justify-center h-8 w-8 text-2xl"><span class="relative block icon"><svg viewBox="0 0 640 512"><path fill="currentColor" d="M172.5 131.1c55.6-55.59 148-55.59 203.6.0 50 50 57.4 129.7 16.3 187.2L391.3 319.9C381 334.2 361 337.6 346.7 327.3c-14.4-10.3-17.8-30.3-7.5-44.6L340.3 281.1C363.2 249 359.6 205.1 331.7 177.2c-31.4-31.4-82.5-31.4-114 0L105.5 289.5c-31.51 30.6-31.51 82.5.0 114C133.3 431.4 177.3 435 209.3 412.1L210.9 410.1C225.3 400.7 245.3 404 255.5 418.4 265.8 432.8 262.5 452.8 248.1 463.1L246.5 464.2c-58.4 41.1-136.3 34.5-186.29-15.4-56.469-56.5-56.469-148.1.0-204.5L172.5 131.1zM467.5 380c-56.5 56.5-148 56.5-204.5.0-50-50-56.5-128.8-15.4-186.3L248.7 192.1C258.1 177.8 278.1 174.4 293.3 184.7 307.7 194.1 311.1 214.1 300.8 229.3L299.7 230.9C276.8 262.1 280.4 306.9 308.3 334.8c31.4 31.4 82.5 31.4 114 0L534.5 222.5c31.5-31.5 31.5-83.4.0-114C506.7 80.63 462.7 76.99 430.7 99.9L429.1 101C414.7 111.3 394.7 107.1 384.5 93.58 374.2 79.2 377.5 59.21 391.9 48.94L393.5 47.82C451 6.731 529.8 13.25 579.8 63.24c56.5 56.46 56.5 148.06.0 204.46L467.5 380z"/></svg>
</span></span><span title=Links class="text-2xl font-bold tracking-tight">Links</span></a></div></nav></div></div></div></div></div><script>(function(){var t,n,e=document.querySelector(".main-menu");if(!e)return;t=window.location.pathname,n=e.querySelectorAll('a[href="'+t+'"]'),n.forEach(function(e){var t=e.querySelectorAll("span");t.forEach(function(e){e.classList.add("active")})})})()</script></div></div><script type=text/javascript src=/js/background-blur.min.605b3b942818f0ab5a717ae446135ec46b8ee5a2ad12ae56fb90dc2a76ce30c388f9fec8bcc18db15bd47e3fa8a09d779fa12aa9c184cf614a315bc72c6c163d.js integrity="sha512-YFs7lCgY8KtacXrkRhNexGuO5aKtEq5W+5DcKnbOMMOI+f7IvMGNsVvUfj+ooJ13n6EqqcGEz2FKMVvHLGwWPQ==" data-blur-id=menu-blur></script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><figure><img src=/posts/2021/cloud-security-and-azure-private-link/featured_hu_56db6e645d544491.png alt="Cloud Security And Azure Private Link" loading=eager decoding=async fetchpriority=high class="w-full rounded-lg single_hero_round nozoom"></figure><header id=single_header class="mt-5 max-w-prose"><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class=hidden><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/>William Collins</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/posts/>Posts</a><span class="px-1 text-primary-500">/</span></li><li class=hidden><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/posts/2021/cloud-security-and-azure-private-link/>Cloud Security And Azure Private Link</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Cloud Security And Azure Private Link</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime=2021-01-11T18:55:25-05:00>11 January 2021</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">15 mins</span></div><div class="flex flex-row flex-wrap items-center"><a class="relative mt-[0.5rem] me-2" href=/categories/cloud/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Cloud
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/categories/security/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Security
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/azure/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Azure
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/private-link/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Private-Link
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/dns/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Dns</span></span></a></div></div><div class="flex author"><img class="!mt-0 !mb-0 h-24 w-24 rounded-full me-4" width=96 height=96 alt="William Collins" src=/img/profile_hu_c9cd1d5a6744e127.png data-zoom-src=/img/profile_hu_6f0148836ebfa37e.png><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">William Collins</div><div class="text-sm text-neutral-700 dark:text-neutral-400">Building at the intersection of cloud, automation, and AI. Host of <a href=https://packetpushers.net/podcast/the-cloud-gambit/ target=_blank rel=noreferrer>The Cloud Gambit</a> podcast.</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://linkedin.com/in/william-collins target=_blank aria-label=Linkedin title=Linkedin rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/wcollins target=_blank aria-label=Github title=Github rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://x.com/MacroEngineered target=_blank aria-label=X-Twitter title=X-Twitter rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg></span></span></a>
<a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://youtube.com/@MacroEngineered target=_blank aria-label=Youtube title=Youtube rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 576 512"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78.0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://wcollins.io/index.xml target=_blank aria-label=Rss title=Rss rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M0 64C0 46.3 14.3 32 32 32c229.8.0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7.0 64zM128 416c0 35.3-28.7 64-64 64S0 451.3.0 416s28.7-64 64-64 64 28.7 64 64zM32 160c159.1.0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7.0-32-14.3-32-32s14.3-32 32-32z"/></svg></span></span></a></div></div></div></div><div class=mb-5></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ms-auto px-0 lg:order-last lg:ps-8 lg:max-w-2xs"><div class="toc ps-5 print:hidden lg:sticky lg:top-[140px]"><details open id=TOCView class="toc-right mt-0 overflow-y-auto overscroll-contain bf-scrollbar rounded-lg -ms-5 ps-5 pe-2 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted border-s-1 -ms-5 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#the-problem>The Problem</a><ul><li><a href=#examining-cloud-security-models>Examining Cloud Security Models</a></li><li><a href=#risky-patterns>Risky Patterns</a></li></ul></li><li><a href=#a-word-on-provider-architectures>A Word On Provider Architectures</a><ul><li><a href=#service-behavior>Service Behavior</a></li><li><a href=#resource-allocation>Resource Allocation</a></li></ul></li><li><a href=#integration>Integration</a></li><li><a href=#before-service-endpoints>Before Service Endpoints</a><ul><li><a href=#why-is-this-risky>Why Is This Risky?</a></li><li><a href=#tradeoffs>Tradeoffs</a></li></ul></li><li><a href=#vnet-integration>VNet Integration</a><ul><li><a href=#problems-solved-by-vnet-integration>Problems Solved By VNet Integration</a></li><li><a href=#vnet-integration-tradeoffs>VNet Integration Tradeoffs</a></li></ul></li><li><a href=#service-endpoints>Service Endpoints</a><ul><li><a href=#problems-solved-by-service-endpoints>Problems Solved By Service Endpoints</a></li><li><a href=#setting-up-a-service-endpoint>Setting Up A Service Endpoint</a></li><li><a href=#dns-behavior-with-service-endpoints>DNS Behavior With Service Endpoints</a></li><li><a href=#service-endpoint-tradeoffs>Service Endpoint Tradeoffs</a></li></ul></li><li><a href=#private-link>Private Link</a><ul><li><a href=#breaking-down-the-components>Breaking Down The Components</a></li><li><a href=#problems-solved-by-private-link>Problems Solved By Private Link</a></li><li><a href=#setting-up-a-private-endpoint>Setting Up A Private Endpoint</a></li><li><a href=#dns-behavior-with-private-endpoints>DNS Behavior With Private Endpoints</a></li><li><a href=#private-link-tradeoffs>Private Link Tradeoffs</a></li><li><a href=#expanding-on-dns-complexity>Expanding On DNS Complexity</a></li></ul></li><li><a href=#conclusion>Conclusion</a><ul><li><a href=#acknowledgements>Acknowledgements</a></li></ul></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg -ms-5 ps-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 border-s-1 -ms-5 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#the-problem>The Problem</a><ul><li><a href=#examining-cloud-security-models>Examining Cloud Security Models</a></li><li><a href=#risky-patterns>Risky Patterns</a></li></ul></li><li><a href=#a-word-on-provider-architectures>A Word On Provider Architectures</a><ul><li><a href=#service-behavior>Service Behavior</a></li><li><a href=#resource-allocation>Resource Allocation</a></li></ul></li><li><a href=#integration>Integration</a></li><li><a href=#before-service-endpoints>Before Service Endpoints</a><ul><li><a href=#why-is-this-risky>Why Is This Risky?</a></li><li><a href=#tradeoffs>Tradeoffs</a></li></ul></li><li><a href=#vnet-integration>VNet Integration</a><ul><li><a href=#problems-solved-by-vnet-integration>Problems Solved By VNet Integration</a></li><li><a href=#vnet-integration-tradeoffs>VNet Integration Tradeoffs</a></li></ul></li><li><a href=#service-endpoints>Service Endpoints</a><ul><li><a href=#problems-solved-by-service-endpoints>Problems Solved By Service Endpoints</a></li><li><a href=#setting-up-a-service-endpoint>Setting Up A Service Endpoint</a></li><li><a href=#dns-behavior-with-service-endpoints>DNS Behavior With Service Endpoints</a></li><li><a href=#service-endpoint-tradeoffs>Service Endpoint Tradeoffs</a></li></ul></li><li><a href=#private-link>Private Link</a><ul><li><a href=#breaking-down-the-components>Breaking Down The Components</a></li><li><a href=#problems-solved-by-private-link>Problems Solved By Private Link</a></li><li><a href=#setting-up-a-private-endpoint>Setting Up A Private Endpoint</a></li><li><a href=#dns-behavior-with-private-endpoints>DNS Behavior With Private Endpoints</a></li><li><a href=#private-link-tradeoffs>Private Link Tradeoffs</a></li><li><a href=#expanding-on-dns-complexity>Expanding On DNS Complexity</a></li></ul></li><li><a href=#conclusion>Conclusion</a><ul><li><a href=#acknowledgements>Acknowledgements</a></li></ul></li></ul></nav></div></details><script>(function(){"use strict";const s=.33,o="#TableOfContents",i=".anchor",a='a[href^="#"]',r="li ul",c="active";let t=!1;function l(e,n){const o=window.scrollY+window.innerHeight*n,i=[...document.querySelectorAll('#TableOfContents a[href^="#"]')],s=new Set(i.map(e=>e.getAttribute("href").substring(1)));if(t)for(let t=0;t<e.length;t++){const n=e[t];if(!s.has(n.id))continue;const o=n.getBoundingClientRect().top+window.scrollY;if(Math.abs(window.scrollY-o)<100)return n.id}for(let t=e.length-1;t>=0;t--){const n=e[t].getBoundingClientRect().top+window.scrollY;if(n<=o&&s.has(e[t].id))return e[t].id}return e.find(e=>s.has(e.id))?.id||""}function e({toc:e,anchors:t,links:n,scrollOffset:s,collapseInactive:o}){const i=l(t,s);if(!i)return;if(n.forEach(e=>{const t=e.getAttribute("href")===`#${i}`;if(e.classList.toggle(c,t),o){const n=e.closest("li")?.querySelector("ul");n&&(n.style.display=t?"":"none")}}),o){const n=e.querySelector(`a[href="#${CSS.escape(i)}"]`);let t=n;for(;t&&t!==e;)t.tagName==="UL"&&(t.style.display=""),t.tagName==="LI"&&t.querySelector("ul")?.style.setProperty("display",""),t=t.parentElement}}function n(){const n=document.querySelector(o);if(!n)return;const l=!1,u=[...document.querySelectorAll(i)],d=[...n.querySelectorAll(a)];l&&n.querySelectorAll(r).forEach(e=>e.style.display="none"),d.forEach(e=>{e.addEventListener("click",()=>{t=!0})});const c={toc:n,anchors:u,links:d,scrollOffset:s,collapseInactive:l};window.addEventListener("scroll",()=>e(c),{passive:!0}),window.addEventListener("hashchange",()=>e(c),{passive:!0}),e(c)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",n):n()})()</script></div></div><div class="min-w-0 min-h-0 max-w-fit"><div class="article-content max-w-prose mb-20"><p><a href=https://azure.microsoft.com/en-us/services/private-link/ target=_blank rel=noreferrer>Azure Private Link</a> enables access to <em>hosted</em> customer and <em>partner</em> services over a private endpoint in an Azure virtual network. This means private connectivity over your own <a href=https://tools.ietf.org/html/rfc1918 target=_blank rel=noreferrer>RFC1918</a> address space to any supported <a href=https://azure.microsoft.com/en-us/overview/what-is-paas/ target=_blank rel=noreferrer>PaaS</a> service while limiting the need for additional gateways, NAT appliances, public IP addresses, or <a href=https://docs.microsoft.com/en-us/azure/expressroute/expressroute-circuit-peerings#microsoftpeering target=_blank rel=noreferrer>ExpressRoute (Microsoft Peering)</a>.</p><p>Hold on, wasn&rsquo;t the point of <a href=https://azure.microsoft.com/en-us/overview/what-is-a-public-cloud/ target=_blank rel=noreferrer>Public Cloud</a> to leverage services offered by <em>third-party</em> providers over the public internet? Why, then, would we want to contain traffic in our private IP space, which is likely routable across our on-premises network? Let&rsquo;s examine this a little deeper to understand the problem we are aiming to solve, solutions available today, some complexities introduced with <em>Private Link</em>, and why we wouldn&rsquo;t just use PaaS services <em>as is</em>.</p><blockquote><p>Microsoft announced Private Link <a href="https://azure.microsoft.com/en-us/blog/announcing-azure-private-link/#:~:text=With%20today%27s%20announcement%2C%20you%20can,using%20simple%20clicks%20and%20approval" target=_blank rel=noreferrer>(Preview)</a> in 2019 becoming generally available in <a href=https://azure.microsoft.com/en-us/updates/private-link-now-available-in-ga/ target=_blank rel=noreferrer>early 2020</a>. AWS released their flavor of <a href="https://aws.amazon.com/privatelink/?privatelink-blogs.sort-by=item.additionalFields.createdDate&amp;privatelink-blogs.sort-order=desc" target=_blank rel=noreferrer>Private Link</a> back in 2017. <a href=https://cloud.google.com/ target=_blank rel=noreferrer>Google Cloud</a> released <a href=https://cloud.google.com/blog/products/networking/introducing-private-service-connect target=_blank rel=noreferrer>Private Service Connect</a> in 2020.</p></blockquote><figure><img class="my-0 rounded-md" loading=lazy decoding=async fetchpriority=low alt="Azure Private Link - Overview" src=/posts/2021/cloud-security-and-azure-private-link/private-link-overview.png width=1427 height=831><figcaption>Overview</figcaption></figure><h2 class="relative group">The Problem<div id=the-problem class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#the-problem aria-label=Anchor>#</a></span></h2><p>Leveraging <a href=https://azure.microsoft.com/en-us/overview/what-is-paas/ target=_blank rel=noreferrer>PaaS</a> services is kind of like owning a home. Except in that home, you don&rsquo;t have to fix cracks in the foundation, patch that leaky roof, clean the garage, or even mow the lawn. PaaS services significantly reduce infrastructure management and increase agility while simplifying your ability to scale. Security-focused teams will usually identify the following as problems when talking <em>PaaS</em>:</p><ul><li>The risk of <strong>data leakage / exfiltration</strong> increases as PaaS integration with <a href=https://azure.microsoft.com/en-us/overview/what-is-iaas/ target=_blank rel=noreferrer>IaaS</a> and on-premises environments increase</li><li>Decreasing or eliminating <strong>internet exposure</strong> is preferred; Azure PaaS services were originally available via public IP addresses only</li><li>Anything that runs over a network that isn&rsquo;t your own private <em>WAN</em> is risky and must be <strong>avoided</strong></li></ul><blockquote><p>While I understand and share concerns with risk here, these are generally obstacles I have run into with various security teams throughout my time in tech. I can look back on some tough conversations in the past when trying to advocate for <a href=https://www.cisco.com/c/en/us/solutions/enterprise-networks/sd-wan/what-is-sd-wan.html target=_blank rel=noreferrer>SD-WAN</a>. Since it went over the <em>internet</em>, it couldn&rsquo;t be reliable and introduced significant <em>risk</em> to the business. Fast-forward to <em>2021</em> especially in the current state of the <a href=https://www.cdc.gov/coronavirus/2019-ncov/index.html target=_blank rel=noreferrer>COVID-19</a> pandemic; most large enterprises now declare <em>internet</em> as the new network, <em>public cloud</em> as the new data center, and <em>identity</em> as the new perimeter.</p></blockquote><h3 class="relative group">Examining Cloud Security Models<div id=examining-cloud-security-models class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#examining-cloud-security-models aria-label=Anchor>#</a></span></h3><p>Our scope here is <em>security in the cloud</em>, not <em>security of the cloud</em>. Security considerations differ in the cloud by service model. In descending through each service model&rsquo;s different layers, the responsibility for security shifts between Customer and Provider.</p><p>For example, with <a href=https://azure.microsoft.com/en-us/overview/what-is-saas/ target=_blank rel=noreferrer>SaaS</a>, the layers a customer is responsible for is relatively small; data and access/identity are considered. As you move into <a href=https://azure.microsoft.com/en-us/overview/what-is-paas/ target=_blank rel=noreferrer>PaaS</a>, the application layer, along with some platform configuration, comes into play. Moving into <a href=https://azure.microsoft.com/en-us/overview/what-is-iaas/ target=_blank rel=noreferrer>IaaS</a>, the operating system is now customer responsibility, along with all the layers above.</p><figure><img class="my-0 rounded-md" loading=lazy decoding=async fetchpriority=low alt="Security Models" src=/posts/2021/cloud-security-and-azure-private-link/security-models.png width=3816 height=2064><figcaption>Security Models</figcaption></figure><blockquote><p>When you have a nice mixture of the three cloud layers and the full gamut of all things data center, thinking through the security domain becomes complicated quickly. Add some <a href=https://en.wikipedia.org/wiki/Multicloud target=_blank rel=noreferrer>Multi-Cloud</a> to this venue, and you are in for a real party.</p></blockquote><h3 class="relative group">Risky Patterns<div id=risky-patterns class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#risky-patterns aria-label=Anchor>#</a></span></h3><p>In the <em>Digital Era</em>, privacy is at the top of the list. This is especially true when considering specific regulations like <a href=https://gdpr.eu/ target=_blank rel=noreferrer>GDPR</a> or <a href=https://www.cdc.gov/phlp/publications/topic/hipaa.html target=_blank rel=noreferrer>HIPAA</a>. A data leak can cause a significant loss in revenue and long-term damage to your brand. Specific patterns can expose the number of porous areas, contributing to possible data leakage if not appropriately hardened.</p><ul><li><a href=https://azure.microsoft.com/en-us/product-categories/identity/ target=_blank rel=noreferrer><strong>Identity & Access Management <em>(IAM)</em></strong></a> - Access based on identity authentication and authorization controls; The ground floor for establishing <a href=https://www.microsoft.com/en-us/security/business/zero-trust target=_blank rel=noreferrer>Zero Trust</a> in the public cloud</li><li><strong>Cloud Endpoints to On-Premises</strong> - Services in public cloud provider&rsquo;s managed network need to make calls to on-premises <em>private networks</em></li><li><strong>On-Premises to Cloud Endpoints</strong> - Exact opposite of the first pattern; Services in public cloud provider&rsquo;s managed network need to be called from an on-premises <em>private network</em></li><li><strong>Internet Egress</strong> - Any point of internet exit; A sinister concoction of data center places, <em>properly designed</em> cloud places, <em>shadow IT</em> <strong>oops</strong> cloud places, and&mldr; plenty of other venues just south of anyone&rsquo;s radar</li></ul><h2 class="relative group">A Word On Provider Architectures<div id=a-word-on-provider-architectures class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#a-word-on-provider-architectures aria-label=Anchor>#</a></span></h2><p>For <em>public cloud</em> to achieve the massive <em>scale-out</em> which accommodates customer growth, <em>cloud services</em> are built on large pools of resources (network, compute, and storage). This large pool of resources is managed by a centralized <a href="https://en.wikipedia.org/wiki/Control_plane#:~:text=In%20computing%2C%20the%20control%20plane,that%20processes%20the%20data%20requests." target=_blank rel=noreferrer>control plane</a>. As demand increases, additional <em>resources</em> are added to the pool to increase capacity.</p><h3 class="relative group">Service Behavior<div id=service-behavior class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#service-behavior aria-label=Anchor>#</a></span></h3><p>There are ultimately two ways in which services can be categorized based on <em>networking</em> behavior. Since this write-up is <em>Azure</em> focused, I&rsquo;ll map <em>Azure</em> specific constructs into the examples:</p><p><strong>Public Services</strong> is typically what we think of when referencing <em>PaaS</em>. Public Services are consumed over the internet, reachable via <em>public IP addresses</em>, and are not provisioned in the customer&rsquo;s <em>VNet</em>. An example of a <em>public service</em> would be <a href=https://azure.microsoft.com/en-us/services/storage/ target=_blank rel=noreferrer>Azure Storage</a>.</p><p><strong>Private Services</strong> by default, are not reachable over the internet. Services are assigned <a href=https://tools.ietf.org/html/rfc1918 target=_blank rel=noreferrer>RFC1918</a> addresses and are deployed directly inside a customer&rsquo;s virtual network. An example of a <em>private service</em> would be an <a href=https://azure.microsoft.com/en-us/services/virtual-machines/ target=_blank rel=noreferrer>Azure Virtual Machine</a>.</p><h3 class="relative group">Resource Allocation<div id=resource-allocation class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#resource-allocation aria-label=Anchor>#</a></span></h3><p>When customers provision a service, the <em>control plane</em> will create an <em>instance</em> of the service. Resources are then allocated accordingly. There are generally two ways in which a <em>service</em> can allocate resources to an <em>instance</em>:</p><p><strong>Shared Services</strong> - Resources are allocated to more than one service instance; Each instance consumes resources <em>simultaneously</em>.</p><p><strong>Dedicated Services</strong> - Resources are allocated to a single instance; These resources remain dedicated for the <em>instance&rsquo;s</em> entire <em>lifecycle</em>.</p><figure><img class="my-0 rounded-md" loading=lazy decoding=async fetchpriority=low alt="Service Allocation" src=/posts/2021/cloud-security-and-azure-private-link/service-allocation-patterns.png width=2668 height=2025><figcaption>Service Allocation</figcaption></figure><h2 class="relative group">Integration<div id=integration class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#integration aria-label=Anchor>#</a></span></h2><p>Suppose you are going through the cloud migration journey. In that case, you may have some strategy that includes a combination of <a href=https://aws.amazon.com/blogs/enterprise-strategy/6-strategies-for-migrating-applications-to-the-cloud/ target=_blank rel=noreferrer>rehost, replatform, and refactor.</a> At some point, you will probably be faced with integrating cloud <a href=https://azure.microsoft.com/en-us/overview/what-is-paas/ target=_blank rel=noreferrer>PaaS</a> services with <a href=https://azure.microsoft.com/en-us/overview/what-is-iaas/ target=_blank rel=noreferrer>IaaS</a> and even back <em>on-premises</em>.</p><h2 class="relative group">Before Service Endpoints<div id=before-service-endpoints class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#before-service-endpoints aria-label=Anchor>#</a></span></h2><p><a href=https://docs.microsoft.com/en-us/azure/azure-sql/database/sql-database-paas-overview/ target=_blank rel=noreferrer>Azure SQL DB</a> is a great way to migrate your SQL Server databases without changing your apps, making it extremely popular. Before Service Endpoints came along, how would a <a href=https://azure.microsoft.com/en-us/services/virtual-machines/ target=_blank rel=noreferrer>virtual machine</a> communicate to Azure SQL?</p><ul><li>Azure SQL DB is available via public IP address and listens on port 1433</li><li>The virtual machine has direct connectivity to the internet via NAT&rsquo;ed IP address</li><li>The virtual machine leverages this for internet egress to reach Azure SQL service</li><li>Azure SQL service sees the NAT&rsquo;ed IP address, not the private IP of the virtual machine</li><li>No restrictions can be enforced to limit service ingress to your private IP addresses only</li></ul><h3 class="relative group">Why Is This Risky?<div id=why-is-this-risky class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#why-is-this-risky aria-label=Anchor>#</a></span></h3><p>To filter traffic in this scenario, the virtual machine would need a public IP address. This presents the following complications:</p><ul><li>Virtual Machine now allows ingress directly from the internet (This is never a good practice)</li><li>The subnet that hosts the virtual machine would require a NAT gateway; More configuration with potential performance implications</li><li>Azure SQL would need to be open to clients on any network; In the event credentials are leaked, anyone on the internet could gain access</li></ul><h3 class="relative group">Tradeoffs<div id=tradeoffs class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#tradeoffs aria-label=Anchor>#</a></span></h3><p>Aside from being inflexible in controlling <em>ingress</em> and <em>egress</em> traffic, the route is not optimal. Traffic is technically going out to the internet, but this is probably, in reality, routing through Azure&rsquo;s external backbone and coming back in. The service is reachable via public IP address only. Considering the design and various integrations required to make it work, there could be significant opportunities for data leakage or exfiltration.</p><h2 class="relative group">VNet Integration<div id=vnet-integration class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#vnet-integration aria-label=Anchor>#</a></span></h2><p><a href=https://docs.microsoft.com/en-us/azure/app-service/web-sites-integrate-with-vnet target=_blank rel=noreferrer>VNet Integration</a> is leveraged for services whose design matches the <em>dedicated services</em> architecture. Also called <em>VNet Injection</em>, this method deploys a given service directly in your <em>VNet</em>. As a solution, it enables better continuity for workloads operating in <em>tiered hybrid</em> design.</p><figure><img class="my-0 rounded-md" loading=lazy decoding=async fetchpriority=low alt="VNet Integration" src=/posts/2021/cloud-security-and-azure-private-link/vnet-integration-diagram.png width=2340 height=2145><figcaption>VNet Integration</figcaption></figure><h3 class="relative group">Problems Solved By VNet Integration<div id=problems-solved-by-vnet-integration class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#problems-solved-by-vnet-integration aria-label=Anchor>#</a></span></h3><ul><li><em>Injected</em> services are exposed over <a href=https://tools.ietf.org/html/rfc1918 target=_blank rel=noreferrer>RFC1918</a> addresses directly from your VNet</li><li>As a dedicated platform, none of the components are shared across other customers; This could be a requirement in some cases</li><li>At the <em>network layer</em>, the behavior would be similar to that of a virtual machine in the same <em>VNet</em></li><li>Communication to virtual machines in same <em>VNet</em> and in <a href=https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-peering-overview target=_blank rel=noreferrer>peered VNets</a> is <em>bidirectional</em></li><li>Communication between on-premises environments over <a href=https://docs.microsoft.com/en-us/azure/expressroute/expressroute-circuit-peerings#privatepeering target=_blank rel=noreferrer>ExpressRoute - Private Peering</a> or VPNs is <em>bidirectional</em></li><li>Inbound connections from routable IP addresses outside of VNet address space is possible when exposed behind public IP address; Best to use an <a href="https://docs.microsoft.com/en-us/azure/load-balancer/quickstart-load-balancer-standard-public-portal?tabs=option-1-create-load-balancer-standard" target=_blank rel=noreferrer>external load balancer</a> / front-end IP address</li><li><a href=https://docs.microsoft.com/en-us/azure/load-balancer/load-balancer-outbound-connections target=_blank rel=noreferrer>VNet Source NAT</a> can be used to initiate connections to internet routable IP addresses</li></ul><h3 class="relative group">VNet Integration Tradeoffs<div id=vnet-integration-tradeoffs class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#vnet-integration-tradeoffs aria-label=Anchor>#</a></span></h3><p>Although <em>VNet Integration</em> was created to deploy <a href=https://azure.microsoft.com/en-us/services/app-service/web/ target=_blank rel=noreferrer>App Services</a> privately, is all of it really private and <em>exclusive</em> to only your <em>VNet</em>? While the service itself is dedicated, the control plane managing the services is not. Integrated services require inbound and outbound connections to <em>platform managed</em> public IP addresses, which facilitate interaction to the <em>control plane</em>. Whether this is a tradeoff is debatable.</p><ul><li>Integrated services are deployed into an <em>isolated</em> subnet; Services contain <a href=https://docs.microsoft.com/en-us/azure/app-service/environment/network-info#ase-subnet-size target=_blank rel=noreferrer>sizing guidlines</a></li><li>Each service identifies the required dependencies for control plane communication; For example, <a href=https://docs.microsoft.com/en-us/azure/app-service/environment/intro target=_blank rel=noreferrer>App Service Environment</a> dependencies can be found <a href=https://docs.microsoft.com/en-us/azure/app-service/environment/network-info#ase-dependencies target=_blank rel=noreferrer>here</a></li><li>Increased complexity in managing <a href=https://docs.microsoft.com/en-us/azure/virtual-network/network-security-groups-overview target=_blank rel=noreferrer>NSGs</a> and <a href=https://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-udr-overview#user-defined target=_blank rel=noreferrer>UDRs</a>; <a href=https://docs.microsoft.com/en-us/azure/virtual-network/network-security-groups-overview#service-tags target=_blank rel=noreferrer>Service Tags</a> should be used to reduce overhead as the mapping between tag and addresses are automatically managed by the platform</li><li>Ultimately, each service will exhibit different behavior and likely has different requirements; Always consult the official documentation</li></ul><h2 class="relative group">Service Endpoints<div id=service-endpoints class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#service-endpoints aria-label=Anchor>#</a></span></h2><p><a href=https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-service-endpoints-overview target=_blank rel=noreferrer>Service Endpoints</a> as a solution can be applied to select <em>PaaS</em> services with a <em>shared architecture</em>. A route is created from your <em>PaaS</em> service into the desired <em>VNets</em>.</p><figure><img class="my-0 rounded-md" loading=lazy decoding=async fetchpriority=low alt="Service Endpoints" src=/posts/2021/cloud-security-and-azure-private-link/service-endpoints-diagram.png width=2597 height=2153><figcaption>Service Endpoints</figcaption></figure><h3 class="relative group">Problems Solved By Service Endpoints<div id=problems-solved-by-service-endpoints class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#problems-solved-by-service-endpoints aria-label=Anchor>#</a></span></h3><ul><li>After enabling a service endpoint in the subnet where the <a href=https://azure.microsoft.com/en-us/services/application-gateway/ target=_blank rel=noreferrer>Application Gateway</a> is deployed, source IP addresses switch from public to private IP addresses</li><li>Traffic from a given virtual machine in a private subnet can now talk directly to Azure SQL without requiring internet egress; Without a public IP address, bad actors can&rsquo;t scan a virtual machine&rsquo;s open ports for vulnerabilities, thus limiting application downtime and data theft</li><li>Service Endpoints ensure traffic egressing a given subnet is tagged with the subnet ID; Traffic inbound to Azure SQL can then be identified and blocked except for your desired subnet IDs (like the subnet which hosts the service endpoint)</li><li>An <a href=https://docs.microsoft.com/en-us/azure/virtual-network/network-security-groups-overview target=_blank rel=noreferrer>NSG</a> can then restrict all egress traffic from the subnet to the internet, thus locking down communication both ways</li><li>Connecting to Azure Services from your VNet happens with an optimized route over Azure&rsquo;s internal backbone network; This reduces network hops, which increases performance (In most cases)</li></ul><h3 class="relative group">Setting Up A Service Endpoint<div id=setting-up-a-service-endpoint class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#setting-up-a-service-endpoint aria-label=Anchor>#</a></span></h3><p>When provisioning a compatible service like <a href=https://azure.microsoft.com/en-us/services/key-vault/ target=_blank rel=noreferrer>Azure Keyvault</a>, you will have an option to use <strong><em>Public Endpoint (Selected Networks)</em></strong> during the setup process. It will then walk you through enabling <em>service endpoints</em> on your desired virtual network and subnet.</p><figure><img class="my-0 rounded-md" loading=lazy decoding=async fetchpriority=low alt="Service Endpoint Setup" src=/posts/2021/cloud-security-and-azure-private-link/service-endpoint-setup.gif width=800 height=803><figcaption>Setup</figcaption></figure><h3 class="relative group">DNS Behavior With Service Endpoints<div id=dns-behavior-with-service-endpoints class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#dns-behavior-with-service-endpoints aria-label=Anchor>#</a></span></h3><p><a href=https://en.wikipedia.org/wiki/Domain_Name_System target=_blank rel=noreferrer>DNS</a> behavior remains <em>as-is</em> when leveraging <em>service endpoints</em>. DNS of a given resource will always resolve the resource&rsquo;s public IP address regardless of where the traffic originates. This is because the <em>service endpoint</em> doesn&rsquo;t change the network interface IP address of the resource it was added to. In doing a DNS lookup from an Azure virtual machine, we get a <em>CNAME</em> to <strong><em>cloudapp.net</em></strong> which gives us <strong><em>20.185.217.251</em></strong>. This lookup is identical when being executed both from the virtual machine living in the <em>VNet</em> and on my local machine at home.</p><figure><img class="my-0 rounded-md" loading=lazy decoding=async fetchpriority=low alt="Service Endpoints DNS Query" src=/posts/2021/cloud-security-and-azure-private-link/se-dns-query.gif width=1178 height=518><figcaption>DNS Query</figcaption></figure><h3 class="relative group">Service Endpoint Tradeoffs<div id=service-endpoint-tradeoffs class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#service-endpoint-tradeoffs aria-label=Anchor>#</a></span></h3><p>Leveraging service endpoints is an excellent way to harden your VNet and service communication; As with everything in technology, it has tradeoffs to consider.</p><ul><li>Connection initiation with service endpoints is <em>unidirectional</em>; The initiator must be inside the subnet that holds the integration</li><li>From a VNet&rsquo;s vantage point, <em>service endpoints</em> provide access to the entire <em>PaaS</em> service; You cannot target specific <em>instances</em> of a PaaS service</li><li>Once enabled on a <em>subnet</em>, clients in the subnet have <em>network level</em> access to all instances of that particular service (including those belonging to other users); To mitigate the risk of leakage or data exfiltration, <a href=https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-service-endpoint-policies-overview target=_blank rel=noreferrer>Service Endpoint Policies</a> should be used<blockquote><p>Service Endpoint Policies enable VNet owners to control precisely which <em>instances</em> of a service type can be accessed from their VNet</p></blockquote></li><li>The source is now a private IP address, but the destination is still the service resource&rsquo;s public IP address; Traffic is still leaving your virtual network (Whether this is a tradeoff is debatable)</li><li>Service Endpoints override any <a href=https://en.wikipedia.org/wiki/Border_Gateway_Protocol target=_blank rel=noreferrer>BGP</a> or <a href=https://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-udr-overview target=_blank rel=noreferrer>UDR</a> routes for the address prefix match of any Azure service; While this isn&rsquo;t necessarily a problem, it introduces another traffic pattern that must be accounted for<blockquote><p>When a <em>service endpoint</em> is created, routes for all the public prefixes used by the service type get added to the subnet&rsquo;s route table. The <em>next-hop</em> is set to a value of <strong>VirtualNetworkServiceEndpoint</strong>. All packets that match that <em>next hop</em> are encapsulated in outer packets, which carry information about the identity of their source <em>virtual network</em>.</p></blockquote></li><li>Service Endpoints do not work across <a href=https://docs.microsoft.com/en-us/azure/active-directory/fundamentals/active-directory-whatis target=_blank rel=noreferrer>Azure AD Tenants</a>; This is not generally a problem in smaller environments but may require a workaround in larger or non-standard environments</li><li>Endpoints can&rsquo;t be used for traffic originating from on-premises networks</li></ul><blockquote><p>When service endpoints launched, the recommended solution for connecting from on-premises was to set up <a href=https://docs.microsoft.com/en-us/azure/expressroute/expressroute-circuit-peerings#microsoftpeering target=_blank rel=noreferrer>Microsoft Peering</a>, which comes with additional complexity and considerations. This would involve identifying the Azure service resource side&rsquo;s public IP addresses and allowing via <em>resource IP firewall</em> and the ExpressRoute / On-Premises firewall. Why not just use <em>internet</em> at this point?</p></blockquote><h2 class="relative group">Private Link<div id=private-link class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#private-link aria-label=Anchor>#</a></span></h2><p>To address additional customer demand surrounding integration and security, <a href=https://azure.microsoft.com/en-us/services/private-link/ target=_blank rel=noreferrer>Private Link</a> was born. It is the latest solution to integrate services with a <em>shared architecture</em>. It addresses limitations of <em>service endpoints</em> by exposing <em>PaaS</em> services via <em>private IP addresses</em> taken from a VNets <a href=https://tools.ietf.org/html/rfc1918 target=_blank rel=noreferrer>RFC1918</a> space.</p><figure><img class="my-0 rounded-md" loading=lazy decoding=async fetchpriority=low alt="Private Link" src=/posts/2021/cloud-security-and-azure-private-link/private-link-diagram.png width=3004 height=2151><figcaption>Private Link</figcaption></figure><h3 class="relative group">Breaking Down The Components<div id=breaking-down-the-components class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#breaking-down-the-components aria-label=Anchor>#</a></span></h3><ul><li><a href=https://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-overview target=_blank rel=noreferrer><strong>Virtual Networks</strong> <em>(VNets)</em></a> are created in a subscription with private address space and provide network-level containment of resources with no traffic allowed by default between any two virtual networks. Any communication between virtual networks needs to be explicitly provisioned.</li><li><a href=https://docs.microsoft.com/en-us/azure/private-link/private-endpoint-overview target=_blank rel=noreferrer><strong>Private Endpoint</strong></a> establishes a logical relationship between a public service <em>instance</em> and a <em>NIC</em> attached to the VNet where the <em>service</em> is exposed.</li><li><a href=https://azure.microsoft.com/en-us/services/private-link/ target=_blank rel=noreferrer><strong>Private Link Service</strong></a> enables you to access Azure PaaS Services over a private endpoint. Services supported today can be found <a href=https://docs.microsoft.com/en-us/azure/private-link/private-link-overview#availability target=_blank rel=noreferrer>here.</a></li></ul><h3 class="relative group">Problems Solved By Private Link<div id=problems-solved-by-private-link class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#problems-solved-by-private-link aria-label=Anchor>#</a></span></h3><ul><li>Using a <em>private endpoint</em> enables flexible <em>PaaS</em> integration with your own <em>private</em> address space</li><li>With no public IP addresses exposed, this means network-based <em>access restrictions</em> are not so complicated or not required at all; This simplifies network design as a whole</li><li><em>Private Link</em> enables on-premises clients to use existing <a href=https://docs.microsoft.com/en-us/azure/expressroute/expressroute-circuit-peerings#privatepeering target=_blank rel=noreferrer>ExpressRoute Private Peering</a> or an existing <a href=https://docs.microsoft.com/en-us/azure/architecture/reference-architectures/hybrid-networking/#vpn-connection target=_blank rel=noreferrer>VPN</a> to consume <em>PaaS</em> services via <em>private</em> IP addresses</li><li>A private endpoint is mapped to an instance of a <em>PaaS</em> resource instead of the full service meaning consumers can only connect to that specific resource; This provides additional <em>built-in</em> protection against data leakage</li><li>Connectivity from a designated <em>VNet</em> to a partner (inside or outside) organization&rsquo;s <em>VNet</em> is now possible; This creates new opportunities for B2B <em>(Business-to-Business)</em> which can leverage Azure native connections without the necessity for <em>public endpoints</em></li></ul><h3 class="relative group">Setting Up A Private Endpoint<div id=setting-up-a-private-endpoint class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#setting-up-a-private-endpoint aria-label=Anchor>#</a></span></h3><p>Using the <a href=https://azure.microsoft.com/en-us/services/key-vault/ target=_blank rel=noreferrer>Azure Keyvault</a> example again, you will have an option to use <strong><em>Private Endpoint</em></strong> during the setup process. It will then walk you through setting up all the necessary configuration for a <em>private endpoint</em> and optionally creating a <a href=https://docs.microsoft.com/en-us/azure/dns/private-dns-privatednszone target=_blank rel=noreferrer>Private DNS Zone</a>. Following the defaults, it will also create the <a href=https://www.cloudflare.com/learning/dns/dns-records/dns-a-record/ target=_blank rel=noreferrer>A Record</a> for you.</p><figure><img class="my-0 rounded-md" loading=lazy decoding=async fetchpriority=low alt="Private Endpoint Setup" src=/posts/2021/cloud-security-and-azure-private-link/private-endpoint-setup.gif width=800 height=803><figcaption>Setup</figcaption></figure><h3 class="relative group">DNS Behavior With Private Endpoints<div id=dns-behavior-with-private-endpoints class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#dns-behavior-with-private-endpoints aria-label=Anchor>#</a></span></h3><p>One of the more significant differences between <em>service endpoints</em> and <em>private endpoints</em> is with <a href=https://en.wikipedia.org/wiki/Domain_Name_System target=_blank rel=noreferrer>DNS</a>. In doing a DNS lookup from an Azure virtual machine, we directly resolve the private IP address <strong><em>10.5.1.4</em></strong>. If we did this same lookup from a machine outside of our <em>VNet</em> or Azure, then we would get a <em>CNAME</em> to <strong><em>cloudapp.net</em></strong> which would then give us the public IP address of the service.</p><figure><img class="my-0 rounded-md" loading=lazy decoding=async fetchpriority=low alt="Private Endpoints DNS Query" src=/posts/2021/cloud-security-and-azure-private-link/pe-dns-query.gif width=1319 height=455><figcaption>DNS Query</figcaption></figure><h3 class="relative group">Private Link Tradeoffs<div id=private-link-tradeoffs class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#private-link-tradeoffs aria-label=Anchor>#</a></span></h3><ul><li>Connection initiation with Private Link is <em>unidirectional</em>; The initiator can be multiple <em>VNets</em> or <em>on-premises</em> networks</li><li>As of today, NSGs are not supported on <em>private endpoints</em>; While subnets containing the <em>private endpoint</em> can have an NSG associated, the rules will not be effective on traffic being processed</li><li><a href=https://en.wikipedia.org/wiki/Domain_Name_System target=_blank rel=noreferrer>DNS</a> integration is a major part of <em>Private Link</em> and brings additional complexity; Mapping design and configuration to outcomes requires significant planning</li><li>Transitioning infrastructure from <em>service endpoints</em> to <em>private endpoints</em> will require additional planning and downtime</li></ul><h3 class="relative group">Expanding On DNS Complexity<div id=expanding-on-dns-complexity class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#expanding-on-dns-complexity aria-label=Anchor>#</a></span></h3><p>In the most simple of scenarios, an instance of a service that supports <em>Private Link</em> can be accessed concurrently through the service&rsquo;s <em>public IP address</em> and <em>private endpoint</em> (across multiple VNets). During provisioning, each <em>instance</em> of a <em>public service</em> is assigned a unique and publicly resolvable <em>FQDN</em>. With a service operating in <em>shared architecture</em>, multiple instances run on the same set of resources sharing the same <em>IP address</em>. To handle resolution, <a href=https://en.wikipedia.org/wiki/CNAME_record target=_blank rel=noreferrer>CNAME</a> records map the <em>FQDNs</em> of each instance back to the same address.</p><p><em>Private Link</em>, by design, requires DNS behavior to change based on origin - e.g., inside/outside and also based on the existence of a <em>private endpoint</em> for a given <em>instance</em>. Since, by default, the <em>FQDN</em> of the service resolves to a public IP, you would need to configure DNS accordingly to map to the <em>private IP address</em> allocated from your <em>VNet</em>. This is a topic that should be planned out prior to leveraging this service. One consistent <em>truth</em> I have learned working in technology is, <strong><em>Some of the most bizarre problems leading to colossal time waste turn out to be misconfigured DNS</em></strong>. A great way to get ahead of these challenges is to <a href=https://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances#name-resolution-that-uses-your-own-dns-server target=_blank rel=noreferrer>educate on how name resolution for resources in Azure works</a> and also know your options for <a href=https://docs.microsoft.com/en-us/azure/private-link/private-endpoint-dns#on-premises-workloads-using-a-dns-forwarder target=_blank rel=noreferrer>integrating with on-premises DNS.</a></p><h2 class="relative group">Conclusion<div id=conclusion class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#conclusion aria-label=Anchor>#</a></span></h2><p><a href=https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-service-endpoints-overview target=_blank rel=noreferrer>Service Endpoints</a> as a solution is easier to set up and manage, although integration with on-premises can be a challenge. <a href=https://azure.microsoft.com/en-us/services/private-link/ target=_blank rel=noreferrer>Private Link</a> is much more complex and will differ across environments. Deploying <em>Private Link</em> will require much more up-front discovery and planning around existing design, which also segues into <em>infrastructure as code</em> and possibly incorporating automation outside of <a href=https://azure.microsoft.com/en-us/ target=_blank rel=noreferrer>Azure</a> - (If leveraging existing DNS solution).</p><p><a href=https://en.wikipedia.org/wiki/Benjamin_Franklin target=_blank rel=noreferrer>Benjamin Franklin</a> once said, <strong><em>&ldquo;By failing to prepare, you are preparing to fail.&rdquo;</em></strong> By taking that extra preparation, <em>Private Link</em> can offer much more granular control with how <em>PaaS</em> services are integrated into an environment. In the state of <em>Cybersecurity</em> post-pandemic, I predict that all the major cloud providers will <em>prioritize</em> the <em>privatization</em> of all <em>PaaS</em> endpoints.</p><h3 class="relative group">Acknowledgements<div id=acknowledgements class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none"><a class="text-primary-300 dark:text-neutral-700 !no-underline" href=#acknowledgements aria-label=Anchor>#</a></span></h3><p>Big thanks to the wise and insightful <a href=https://www.linkedin.com/in/sthawkins/ target=_blank rel=noreferrer>Steven Hawkins</a> for taking the time to peer review this post.</p></div><section class="flex flex-row flex-wrap justify-center pt-4 text-xl"><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://wcollins.io/posts/2021/cloud-security-and-azure-private-link/&amp;title=Cloud%20Security%20And%20Azure%20Private%20Link" title="Share on LinkedIn" aria-label="Share on LinkedIn"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://reddit.com/submit/?url=https://wcollins.io/posts/2021/cloud-security-and-azure-private-link/&amp;resubmit=true&amp;title=Cloud%20Security%20And%20Azure%20Private%20Link" title="Submit to Reddit" aria-label="Submit to Reddit"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M201.5 305.5c-13.8.0-24.9-11.1-24.9-24.6.0-13.8 11.1-24.9 24.9-24.9 13.6.0 24.6 11.1 24.6 24.9.0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4.0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7.0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9.0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5.0 52.6 59.2 95.2 132 95.2 73.1.0 132.3-42.6 132.3-95.2.0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6.0-2.2-2.2-6.1-2.2-8.3.0-2.5 2.5-2.5 6.4.0 8.6 22.8 22.8 87.3 22.8 110.2.0 2.5-2.2 2.5-6.1.0-8.6-2.2-2.2-6.1-2.2-8.3.0zm7.7-75c-13.6.0-24.6 11.1-24.6 24.9.0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.1 24.9-24.6.0-13.8-11-24.9-24.9-24.9z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="mailto:?body=https://wcollins.io/posts/2021/cloud-security-and-azure-private-link/&amp;subject=Cloud%20Security%20And%20Azure%20Private%20Link" title="Send via email" aria-label="Send via email"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg></span></a></section><h2 class="mt-8 text-2xl font-extrabold mb-10">Related</h2><section class="w-full grid gap-4 sm:grid-cols-2 md:grid-cols-3"><article class="article-link--related relative min-h-full min-w-full overflow-hidden rounded-lg border border-neutral-300 dark:border-neutral-600"><div class="flex-none relative overflow-hidden thumbnail_card_related"><img src=/posts/2020/automating-cloud-ipam/featured_hu_8631e645f2107f28.png role=presentation loading=lazy decoding=async fetchpriority=low class="not-prose absolute inset-0 w-full h-full object-cover"></div><div class=p-4><header><a href=/posts/2020/automating-cloud-ipam/ class="not-prose before:absolute before:inset-0 decoration-primary-500 dark:text-neutral text-xl font-bold text-neutral-800 hover:underline hover:underline-offset-2"><h2>AnsibleFest 2020 - Automating IPAM In Cloud</h2></a></header><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime=2020-10-13T07:16:08-04:00>13 October 2020</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">10 mins</span></div><div class="flex flex-row flex-wrap items-center"><a class="relative mt-[0.5rem] me-2" href=/categories/automation/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Automation
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/categories/cloud/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Cloud
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/categories/community/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Community
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/ansible/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Ansible
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/azure/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Azure
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/terraform/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Terraform</span></span></a></div></div><div class="article-link__summary prose dark:prose-invert mt-1 line-clamp-5">AnsibleFest AnsibleFest 2020, like most conferences this year, took place completely virtual. I presented on Automating IPAM In Cloud: Ansible + Netbox. You can find the slides along with the demonstration code in this git repo. In this post, I&rsquo;m going to expand a little further on the content I presented.</div></div><div class="px-6 pt-4 pb-2"></div></article><article class="article-link--related relative min-h-full min-w-full overflow-hidden rounded-lg border border-neutral-300 dark:border-neutral-600"><div class="flex-none relative overflow-hidden thumbnail_card_related"><img src=/posts/2020/alkira-multicloud-networking/featured_hu_1ae575dd00094e52.png role=presentation loading=lazy decoding=async fetchpriority=low class="not-prose absolute inset-0 w-full h-full object-cover"></div><div class=p-4><header><a href=/posts/2020/alkira-multicloud-networking/ class="not-prose before:absolute before:inset-0 decoration-primary-500 dark:text-neutral text-xl font-bold text-neutral-800 hover:underline hover:underline-offset-2"><h2>Multi-Cloud Networking With Alkira</h2></a></header><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime=2020-08-19T13:01:29-04:00>19 August 2020</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">15 mins</span></div><div class="flex flex-row flex-wrap items-center"><a class="relative mt-[0.5rem] me-2" href=/categories/cloud/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Cloud
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/categories/networking/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Networking
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/alkira/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Alkira
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/aws/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Aws
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/azure/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Azure
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/gcp/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Gcp</span></span></a></div></div><div class="article-link__summary prose dark:prose-invert mt-1 line-clamp-5">Introduction # Multi-Cloud is making its rounds. Network and Security engineers face increasing challenges with managing complexity and risk as they work to react with more agility to enable business outcomes. At the start, enterprises didn&rsquo;t just decide they would be multi-cloud. They started with a single cloud, likely Amazon Web Services and tailored their strategy around that cloud&rsquo;s architecture and features.</div></div><div class="px-6 pt-4 pb-2"></div></article><article class="article-link--related relative min-h-full min-w-full overflow-hidden rounded-lg border border-neutral-300 dark:border-neutral-600"><div class="flex-none relative overflow-hidden thumbnail_card_related"><img src=/posts/2020/automate-blog-deployment/featured_hu_94e34f404d92ce20.png role=presentation loading=lazy decoding=async fetchpriority=low class="not-prose absolute inset-0 w-full h-full object-cover"></div><div class=p-4><header><a href=/posts/2020/automate-blog-deployment/ class="not-prose before:absolute before:inset-0 decoration-primary-500 dark:text-neutral text-xl font-bold text-neutral-800 hover:underline hover:underline-offset-2"><h2>Automating Blog Releases: Hugo + GitHub Actions</h2></a></header><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime=2020-06-21T17:14:44-04:00>21 June 2020</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">6 mins</span></div><div class="flex flex-row flex-wrap items-center"><a class="relative mt-[0.5rem] me-2" href=/categories/automation/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Automation
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/hugo/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Hugo
</span></span></a><a class="relative mt-[0.5rem] me-2" href=/tags/github-actions/><span class="flex cursor-pointer"><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Github-Actions</span></span></a></div></div><div class="article-link__summary prose dark:prose-invert mt-1 line-clamp-5">A lot of the work I do professionally involves transforming traditional network culture, practices, and technology. Just as DevOps transformed application delivery, NetDevOps is here to make sure the network can keep up. This post will cover how I deploy this blog with Hugo to GitHub Pages using GitHub Actions to completely automate the workflow. This is very similar to how I approached modernizing network documentation for my current employer. Listen to Day Two Cloud Podcast as I talk through this transformation in more detail.</div></div><div class="px-6 pt-4 pb-2"></div></article></section></div></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span class="flex flex-col"><a class="flex text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" href=/posts/2020/automating-cloud-ipam/><span class=leading-6><span class="inline-block rtl:rotate-180">&larr;</span>&ensp;AnsibleFest 2020 - Automating IPAM In Cloud
</span></a><span class="ms-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2020-10-13T07:16:08-04:00>13 October 2020</time>
</span></span><span class="flex flex-col items-end"><a class="flex text-right text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" href=/posts/2021/cloud-grade-automation-with-packer-and-terraform/><span class=leading-6>Cloud Grade Automation With Packer and Terraform&ensp;<span class="inline-block rtl:rotate-180">&rarr;</span>
</span></a><span class="me-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2021-02-08T12:32:29-05:00>8 February 2021</time></span></span></div></div></footer></article><div id=scroll-to-top class="fixed bottom-6 end-6 z-50 transform translate-y-4 opacity-0 duration-200"><a href=#the-top class="pointer-events-auto flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex list-none flex-col sm:flex-row"><li class="flex mb-1 text-end sm:mb-0 sm:me-7 sm:last:me-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/tags/ title=Tags>Tags</a></li><li class="flex mb-1 text-end sm:mb-0 sm:me-7 sm:last:me-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/categories/ title=Categories>Categories</a></li><li class="flex mb-1 text-end sm:mb-0 sm:me-7 sm:last:me-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/series/ title=Series>Series</a></li></ul></nav><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2026
William Collins</p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-500" data-url=https://wcollins.io/><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>
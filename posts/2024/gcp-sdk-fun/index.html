<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>GCP SDK Fun - Blog</title><meta name=Description content="Exploring the disruptive world of cloud tech"><meta property="og:title" content="GCP SDK Fun">
<meta property="og:description" content="Sometimes, especially if you aren&rsquo;t a developer by trade, you can get stuck on something small that will find you banging your forehead on your desk (figuratively, of course). Most of the time, it is easy enough to find an answer online or even from ChatGPT. Other times, you may not be so lucky. The other day, I fell victim to a TWE or time wasting event that I thought was worth writing about."><meta property="og:type" content="article"><meta property="og:url" content="http://wcollins.io/posts/2024/gcp-sdk-fun/"><meta property="og:image" content="http://wcollins.io/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-02-15T16:48:03-05:00"><meta property="article:modified_time" content="2024-02-15T16:48:03-05:00"><meta property="og:site_name" content="Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://wcollins.io/"><meta name=twitter:title content="GCP SDK Fun"><meta name=twitter:description content="Sometimes, especially if you aren&rsquo;t a developer by trade, you can get stuck on something small that will find you banging your forehead on your desk (figuratively, of course). Most of the time, it is easy enough to find an answer online or even from ChatGPT. Other times, you may not be so lucky. The other day, I fell victim to a TWE or time wasting event that I thought was worth writing about."><meta name=twitter:site content="@WCollins502"><meta name=application-name content="Blog"><meta name=apple-mobile-web-app-title content="Blog"><meta name=theme-color content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><meta name=twitter:creator content="@WCollins502"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=http://wcollins.io/posts/2024/gcp-sdk-fun/><link rel=prev href=http://wcollins.io/posts/2023/using-terraform-import-blocks-with-alkira/><link rel=next href=http://wcollins.io/posts/2024/understanding-dilution-of-ownership/><link rel=stylesheet href=/css/main.css><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/color.css><link rel=stylesheet href=/css/style.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/fontawesome-free/all.min.css><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/animate/animate.min.css><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><meta name=google-site-verification content="FSCEdJZD7nAoKk16ak20hRMKNBvXlnHAU0PBBDZy5DU"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"GCP SDK Fun","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"http://wcollins.io/posts/2024/gcp-sdk-fun/"},"genre":"posts","keywords":"chatgpt, go, gcp, vpc","wordcount":425,"url":"http://wcollins.io/posts/2024/gcp-sdk-fun/","datePublished":"2024-02-15T16:48:03-05:00","dateModified":"2024-02-15T16:48:03-05:00","publisher":{"@type":"Organization","name":"William Collins"},"author":{"@type":"Person","name":"William Collins"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>function setTheme(e){document.body.setAttribute("theme",e),document.documentElement.style.setProperty("color-scheme",e==="light"?"light":"dark"),window.theme=e,window.isDark=window.theme!=="light"}function saveTheme(e){window.localStorage&&localStorage.setItem("theme",e)}function getMeta(e){const t=document.getElementsByTagName("meta");for(let n=0;n<t.length;n++)if(t[n].getAttribute("name")===e)return t[n];return""}if(window.localStorage&&localStorage.getItem("theme")){let e=localStorage.getItem("theme");e==="light"||e==="dark"||e==="black"?setTheme(e):setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}else"light"==="light"||"light"==="dark"||"light"==="black"?(setTheme("light"),saveTheme("light")):(saveTheme("auto"),setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));let metaColors={light:"#f8f8f8",dark:"#252627",black:"#000000"};getMeta("theme-color").content=metaColors[document.body.getAttribute("theme")],window.switchThemeEventSet=new Set</script><div id=back-to-top></div><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=Blog></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/>Home </a><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/talks/>Talks </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><a class=menu-item href=/about>About </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw"></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=Blog></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw"></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/ title>Home</a><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/talks/ title>Talks</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a class=menu-item href=/about title>About</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto><nav id=TableOfContents><ul><li><a href=#the-problem>The Problem</a><ul><li><a href=#digging-into-the-code>Digging into the Code</a></li></ul></li><li><a href=#solving-the-problem>Solving the Problem</a><ul><li><a href=#google-wins>Google Wins</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC","true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">GCP SDK Fun</h1><div class=post-meta><div class=post-meta-line><span class=post-author><span class="author fas fa-user-circle fa-fw"></span><a href=/ title=Author rel=author class=author>William Collins</a>
</span>&nbsp;<span class=post-category>included in </span>&nbsp;<span class=post-category>categories <a href=/categories/ai/><i class="far fa-folder fa-fw"></i>Ai</a>&nbsp;<a href=/categories/automation/><i class="far fa-folder fa-fw"></i>Automation</a>&nbsp;<a href=/categories/cloud/><i class="far fa-folder fa-fw"></i>Cloud</a>&nbsp;<a href=/categories/cloud-networking/><i class="far fa-folder fa-fw"></i>Cloud-Networking</a>&nbsp;<a href=/categories/programming/><i class="far fa-folder fa-fw"></i>Programming</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="15 February 2024">15 February 2024</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime="15 February 2024">15 February 2024</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;425 words&nbsp;<i class="far fa-clock fa-fw"></i>&nbsp;2 minutes&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#the-problem>The Problem</a><ul><li><a href=#digging-into-the-code>Digging into the Code</a></li></ul></li><li><a href=#solving-the-problem>Solving the Problem</a><ul><li><a href=#google-wins>Google Wins</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div><div class=content id=content><p>Sometimes, especially if you aren&rsquo;t a developer by trade, you can get stuck on something small that will find you banging your forehead on your desk <em>(figuratively, of course)</em>. Most of the time, it is easy enough to find an answer online or even from <a href=https://chat.openai.com/ target=_blank rel="noopener noreferrer">ChatGPT</a>. Other times, you may not be so lucky. The other day, I fell victim to a <strong>TWE</strong> or <em>time wasting event</em> that I thought was worth writing about. Fasten your seatbelt!</p><p><figure><a class=lightgallery href=/posts/2024/gcp-sdk-fun/intro.jpeg title=Intro data-thumbnail=/posts/2024/gcp-sdk-fun/intro.jpeg data-sub-html="<h2>Intro</h2><p>Intro</p>"><img loading=lazy src=/posts/2024/gcp-sdk-fun/intro.jpeg srcset="/posts/2024/gcp-sdk-fun/intro.jpeg, /posts/2024/gcp-sdk-fun/intro.jpeg 1.5x, /posts/2024/gcp-sdk-fun/intro.jpeg 2x" sizes=auto alt=Intro height=2011 width=5633></a><figcaption class=image-caption>Intro</figcaption></figure></p><h2 id=the-problem class=headerLink><a href=#the-problem class=header-mark></a>The Problem</h2><p><a href="https://cloud.google.com/sdk?hl=en" target=_blank rel="noopener noreferrer">GCP SDK</a> provides libraries and tools for interacting with Google&rsquo;s cloud products and services. Pick your poison with whatever programming language you choose! On this particular <strong>Fun Day</strong>, I was writing a quick script to build <em>VPCs</em> and <em>subnets</em> from <strong>.yaml</strong> files and then expose a <em>destroy</em> call to wipe everything out when particular testing was completed. I&rsquo;ve built something similar for <a href=https://aws.amazon.com/sdk-for-go/ target=_blank rel="noopener noreferrer">AWS SDK for Go</a>. On this particular day, I ran into the following error:</p><p><figure><a class=lightgallery href=/posts/2024/gcp-sdk-fun/error.png title=Error data-thumbnail=/posts/2024/gcp-sdk-fun/error.png data-sub-html="<h2>Error</h2><p>Error</p>"><img loading=lazy src=/posts/2024/gcp-sdk-fun/error.png srcset="/posts/2024/gcp-sdk-fun/error.png, /posts/2024/gcp-sdk-fun/error.png 1.5x, /posts/2024/gcp-sdk-fun/error.png 2x" sizes=auto alt=Error height=296 width=3044></a><figcaption class=image-caption>Error</figcaption></figure></p><h3 id=digging-into-the-code class=headerLink><a href=#digging-into-the-code class=header-mark></a>Digging into the Code</h3><p>I knew I had to set <strong>AutoCreateSubnetworks: false,</strong> in the code as it disables GCP from <em>automagically</em> creating subnets for me. Of course, I want to do that myself! And this is where the confusion started &ndash; I did have this set, and I had omitted the <strong>&lsquo;IPv4Range&rsquo;</strong> at the <em>VPC level</em> despite what the error said.</p><script src=https://gist.github.com/wcollins/036d07bd89bacc3725bd0c03695a7cdd.js></script><h2 id=solving-the-problem class=headerLink><a href=#solving-the-problem class=header-mark></a>Solving the Problem</h2><p>I searched on <a href=https://duckduckgo.com/ target=_blank rel="noopener noreferrer">DuckDuckGo</a>, my search engine of choice, and came up empty. In my desperation, I turned to a <em>bucket-of-bolts</em> I don&rsquo;t fully understand who&rsquo;s supposed to know all the answers, <strong>ChatGPT</strong>. I pasted in the error message and code. The <strong>AI Overlord</strong> then patted me on the back <em>(again figuratively)</em> and told me to set <strong>AutoCreateSubnetworks: false</strong> and remove <strong>IPv4Range</strong> from my code since that is for <em>legacy networks</em>. The problem is that <strong>IPv4Range</strong> wasn&rsquo;t defined anywhere in my code and <strong>AutoCreateSubnetworks</strong> was already set to <em>false</em>.</p><h3 id=google-wins class=headerLink><a href=#google-wins class=header-mark></a>Google Wins</h3><p>As I sat pondering reality, space, and time, I decided to just <em>google search</em> it and came across this <a href=https://stackoverflow.com/questions/59058750/gcp-compute-api-creates-vpc-in-legacy-mode target=_blank rel="noopener noreferrer">excellent answer</a> on Stack Overflow. Apparently, the <strong>AutoCreateSubnetworks</strong> field is not included in the request payload unless you define it explicitly with <strong>ForceSendFields: []string{&ldquo;AutoCreateSubnetworks&rdquo;},</strong>. All I needed was this extra line:</p><script src=https://gist.github.com/wcollins/93c2692f0f1d5bc19dd050888802cd92.js></script><h2 id=conclusion class=headerLink><a href=#conclusion class=header-mark></a>Conclusion</h2><p><em>Artificial Intelligence</em> is a society-altering technology. Is it coming for our jobs anytime soon? I don&rsquo;t think so. Will it help enhance and augment our <em>workflows</em>? Yes, Absolutely! However, situations like this remind me that there is no substitute for people who possess deep skills and understanding in particular areas of technology. This holds especially <em>TRUE</em> when something fails or isn&rsquo;t exhibiting the correct behavior. Happy coding!</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 15 February 2024</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-mardown href=/posts/2024/gcp-sdk-fun/index.md target=_blank rel="noopener noreferrer">Read markdown</a></span></div><div class=post-info-share></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/chatgpt/>Chatgpt</a>,&nbsp;<a href=/tags/go/>Go</a>,&nbsp;<a href=/tags/gcp/>Gcp</a>,&nbsp;<a href=/tags/vpc/>Vpc</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/2023/using-terraform-import-blocks-with-alkira/ class=prev rel=prev title="Using Terraform Import Blocks with Alkira"><i class="fas fa-angle-left fa-fw"></i>Using Terraform Import Blocks with Alkira</a>
<a href=/posts/2024/understanding-dilution-of-ownership/ class=next rel=next title="Understanding Dilution of Ownership">Understanding Dilution of Ownership<i class="fas fa-angle-right fa-fw"></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2019 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank rel="noopener noreferrer">William Collins</a></span></div><div class=footer-line></div><div class=footer-line></div></div></footer></div><div id=fixed-buttons><a href=#back-to-top id=back-to-top-button class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><div class=assets><link rel=stylesheet href=/lib/lightgallery/lightgallery.min.css><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{},lightGallery:{actualSize:!1,exThumbImage:"data-thumbnail",hideBarsDelay:2e3,selector:".lightgallery",speed:400,thumbContHeight:80,thumbWidth:80,thumbnail:!0},search:{distance:null,findAllMatches:null,fuseIndexURL:"/index.json",highlightTag:"em",ignoreFieldNorm:null,ignoreLocation:null,isCaseSensitive:null,location:null,maxResultLength:10,minMatchCharLength:null,noResultsFound:"No results found",snippetLength:30,threshold:null,type:"fuse",useExtendedSearch:null}}</script><script type=text/javascript src=/lib/lightgallery/lightgallery.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-thumbnail.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-zoom.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/js/theme.min.js defer></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-9QKVT40M3H")</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-9QKVT40M3H" async></script></div></body></html>